Initial |manager| Setup
^^^^^^^^^^^^^^^^^^^^^^^

With |manager| now installed, you're dropped into the UI and want to get up and running as quickly as possible. This section goes over some useful first steps for configuring the environment, locating useful features, and adding the first |cluster|.

Global Settings
```````````````

A useful first stop is in global settings (|AdmSet|). Within the Appliance category, check and fill an "Appliance URL" value. This is the default value for |morpheus| Agent installation and functionality. All Instances and hosts must be able to resolve and reach this URL over port 443 for the Agent to install and function properly. Individual Clouds can also have an individual Appliance URL which supersedes the global one set here. While here in the Appliance category, consider checking the "Skip Agent Install" toggle. If on, this toggle will be set by default in the Instance provisioning wizard. If off, this toggle will not be set by default in the Instance provisioning wizard. If your default stance is to install the Agent and maximize the value provided for workloads running on |clusters|, this toggle should be off.

.. image:: /images/vmeInstall/applianceSettings.png

Next, check the Backups section which houses global settings related to backups. If "Scheduled Backups" is toggled, default automatic backup settings will be pre-set each time you begin to configure a new Instance through the Instance provisioning wizard. These default backups will target the default bucket, schedule, and retention settings you see here. This is a good time to double check your default backup bucket and retention settings as it is possible to backup Instances directly to the |manager| VM. If you fill the Manager's disk with backups you could bring the Manager down.

.. image:: /images/vmeInstall/backupSettings.png

One last area to check is the License section. Here you can check your usage against licensed maximums as well as apply new licenses. If you started the Manager using the built-in trial license you will have to return here at some point to apply a full license.

.. image:: /images/vmeInstall/licenseSettings.png

See the `global settings section <https://hpevm-docs.morpheusdata.com/en/latest/administration/settings/settings.html>`_ of |morpheus| documentation for complete details on settings.

User Settings
`````````````

Next, check User Settings. User Settings is accessed by clicking the user's name in the upper-right corner of the application window and then clicking "USER SETTINGS".

Some settings you may want here include "Email" which will ensure any automatic email generated by the Manager (such as Instance provisioning success messages) arrives at a place it can be seen. Setting a default Group and Cloud is also useful as new workloads will begin with your most-used Group and Cloud set by default, which will save a lot of clicks over time. If you haven't yet created your first Group and Cloud (covered in a later section), come back later to set that default. Finally, it's useful to configure a Linux and Windows user here. At provision time if you opt for your user to be added to provisioned Instances, a user will be added with your indicated username, password, and public key (if specified, you must have an existing SSH keypair in the Manager) for easy access to any running workload. API access settings and 2FA settings are also here.

.. image:: /images/vmeInstall/userSettings.png

Creating Groups and Clouds
``````````````````````````

You won't be able to add your first |cluster| without a pre-existing Group and Cloud. Groups define logical groupings of resources and users access those resources based on the Groups associated with their Roles. A Cloud can represent a grouping of |clusters| or a connection into a VMware vCenter environment. You can read more on Groups and Clouds `here <https://hpevm-docs.morpheusdata.com/en/latest/infrastructure/groups/groups.html>`_ and `here <https://hpevm-docs.morpheusdata.com/en/latest/infrastructure/clouds/clouds.html>`_, respectively. This guide will go through the process of adding Private Cloud-type Clouds which house |clusters|. For VMware-type Clouds, see the associated `integration guide <https://hpevm-docs.morpheusdata.com/en/latest/integration_guides/Clouds/vmware/vmware.html>`_.

Start by making your first Group. Click :guilabel:`+ CREATE` at |InfGro|. A Group needs only a name, at minimum. If this Group is going to hold some or all of your |clusters|, you may want to name it accordingly. Once done, save the new Group. We'll next create a Cloud. Navigate to |InfClo| and click :guilabel:`+ ADD`. In addition to being a logical grouping for |clusters|, Clouds can also be a connection into a specific VMware vCenter environment (as narrow as a specific Resource Pool or folder, or more broadly scoped). See the link in the previous paragraph for more details on VMware Clouds. In this case, create a "Private Cloud." Once again, a name is the minimal amount of information required and you may want to name this Cloud in a way that indicates which |clusters| it will encompass. When done, save the new Cloud.

Creating the first |cluster|
````````````````````````````

In preparing the environment, we've already prepped the physical cluster servers but now it's time to provision the actual cluster object within |morpheus|. Begin by navigating to |InfClu| and click :guilabel:`+ ADD CLUSTER`. Currently, the only available cluster type is "HPE VM," which is what we want. Select the correct cluster type and click :guilabel:`NEXT`. On the Group tab, select the Group we created in the previous section and click :guilabel:`NEXT`. On the Name tab, select the Cloud we created in the previous section and enter a name for the cluster. Click :guilabel:`NEXT`.

.. include:: ../infrastructure/clusters/mvm.rst
  :start-after: .. begin_cluster_provisioning
  :end-before: .. end_cluster_provisioning

For more on cluster provisioning, monitoring clusters, and provisioning workloads to existing clusters, see the `full section on HPE VM Clusters <https://hpevm-docs.morpheusdata.com/en/latest/infrastructure/clusters/clusters.html#id1>`_.

Take Note of Virtual Images and Automation
``````````````````````````````````````````

Now that we have a cluster, let's take a quick look at where Virtual Images live and where Automation scripts can be created and stored. Both are under the Library menu. In the Virtual Images section is a list of all Virtual Images that have been synced from integrated Clouds (such as a VMware vCenter Cloud) or manually uploaded. Additionally, running workloads (such as VMs running on |clusters|) can be saved as images with one click. Once the image has been taken, it will appear in the list of Virtual Images here. When provisioning, a list of all compatible images for the target Cloud type is shown. You will need to have at least one HPE VM-compatible image here in order to provision new Instances to the cluster. When uploading images manually, there's often some additional configuration that must be done to make the image compatible with the intended target Cloud type. Take a look at `Virtual Images <https://hpevm-docs.morpheusdata.com/en/latest/library/virtual_images/virtual_images.html>`_ documentation for more detail.

Next in the Library section is Automation. This page contains a list of automation scripts that are stored in |morpheus|. These scripts can be shell scripts, Powershell scripts, or a restart Task that restarts workloads it's run against. I won't go into full detail on writing scripts and the nuances of how they can be used in this section but there's more in the full `Tasks section <https://hpevm-docs.morpheusdata.com/en/latest/library/automation/automation.html>`_ of |morpheus| documentation. Tasks can be used on the Automation tab of the Instance provisioning wizard. Stack Tasks and chain the results for fully automated Instance deployment.

Provsioning the First Workload
``````````````````````````````

All groundwork is now laid to begin provisioning workloads to the |cluster|. Launch the wizard by going to |ProIns| and clicking :guilabel:`+ ADD`. Select an HPE VM-type Instance and click :guilabel:`NEXT`. You'll once again notice the Group and Cloud we created in this guide can be selected. You'll also specify a plan (VM size), resource pool (cluster), image, and cluster host, among a few other selections. After clicking :guilabel:`NEXT`, you'll land on the Automation tab where a set of Tasks can be selected to automate the deployment and configuration of the new Instance. Once the wizard is fully completed, a new Instance will be provisioned to the |cluster|. You are now ready to add more of your images, add more automation tasks, and monitor workloads that are running on your clusters.

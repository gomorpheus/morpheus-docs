<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0">
<title>Morpheus Users Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after,a[href^="mailto:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Morpheus Users Guide</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#requirements">Requirements</a>
<ul class="sectlevel2">
<li><a href="#storage">Storage</a></li>
<li><a href="#network-connectivity">Network Connectivity</a></li>
<li><a href="#components">Components</a></li>
</ul>
</li>
<li><a href="#installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#debian-install">Debian / Ubuntu</a></li>
<li><a href="#centos-install">CentOS / Redhat Enterprise</a></li>
<li><a href="#additional-options">Additional Options</a></li>
</ul>
</li>
<li><a href="#upgrading">Upgrading</a>
<ul class="sectlevel2">
<li><a href="#debian-ubuntu">Debian / Ubuntu</a></li>
<li><a href="#centos-rhel">CentOS / RHEL</a></li>
</ul>
</li>
<li><a href="#provisioning">Provisioning</a>
<ul class="sectlevel2">
<li><a href="#instances">Instances</a></li>
<li><a href="#apps">Apps</a></li>
<li><a href="#deployments">Deployments</a></li>
</ul>
</li>
<li><a href="#infrastructure">Infrastructure</a></li>
<li><a href="#monitoring">Monitoring</a>
<ul class="sectlevel2">
<li><a href="#checks">Checks</a></li>
<li><a href="#apps-groups">Apps &amp; Groups</a></li>
<li><a href="#incidents">Incidents</a></li>
<li><a href="#alerts">Alerts</a></li>
<li><a href="#integrations">Integrations</a></li>
</ul>
</li>
<li><a href="#logging">Logging</a>
<ul class="sectlevel2">
<li><a href="#configuration">Configuration</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#integrations-2">Integrations</a></li>
</ul>
</li>
<li><a href="#administration">Administration</a>
<ul class="sectlevel2">
<li><a href="#roles">Roles</a></li>
<li><a href="#identity-sources">Identity Sources</a></li>
</ul>
</li>
<li><a href="#vmware">VMware Cloud</a>
<ul class="sectlevel2">
<li><a href="#getting-started-3">Getting Started</a></li>
<li><a href="#docker">Docker</a></li>
<li><a href="#multitenancy">Multitenancy</a></li>
<li><a href="#advanced">Advanced</a></li>
</ul>
</li>
<li><a href="#amazon">Amazon</a></li>
<li><a href="#azure">Azure</a>
<ul class="sectlevel2">
<li><a href="#getting-started-4">Getting Started</a></li>
<li><a href="#docker-2">Docker</a></li>
<li><a href="#multitenancy-2">Multitenancy</a></li>
</ul>
</li>
<li><a href="#google">Google</a></li>
<li><a href="#openstack">Openstack</a>
<ul class="sectlevel2">
<li><a href="#getting-started-5">Getting Started</a></li>
<li><a href="#advanced-2">Advanced</a></li>
</ul>
</li>
<li><a href="#softlayer">Softlayer</a></li>
<li><a href="#digitalocean">Digital Ocean</a></li>
<li><a href="#virtualbox">Virtualbox</a></li>
<li><a href="#xen">Xen Server</a></li>
<li><a href="#nutanix">Nutanix</a></li>
<li><a href="#vcloudair">Vcloud Air</a></li>
<li><a href="#hyperv">Hyper-V</a></li>
<li><a href="#docker">Docker</a></li>
<li><a href="#pxe">PXE Booting</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>2.7.9</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Morpheus is a full featured cloud application management platform. Armed with a powerful set of tools for provisioning, logging, monitoring, and backups it is well suited for managing and orchestrating any infrastucture while at the same time providing convenient self-service to both developers and DevOps teams.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements">Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Morpheus is a software based appliance installation capable of orchestrating many clouds and hypervisors. Before an installation is started it is important to understand some of the base requirements.</p>
</div>
<div class="paragraph">
<p>In the simplest configuration Morpheus simply needs one Appliance Server. The Appliance Server, by default, contains all the components necessary to orchestrate both vms and containers. To get started some base requirements are recommended:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Operating System:</strong> Ubuntu 14.04 (recommended) or CentOS/RHEL greater than 7.0.</p>
</li>
<li>
<p><strong>Memory:</strong> 4GiB of RAM</p>
</li>
<li>
<p><strong>Storage:</strong> 50GiB storage</p>
</li>
<li>
<p>Network connectivity from your users to the appliance over TCP 80 (HTTP) or TCP 443 (HTTPS)</p>
</li>
<li>
<p>Inbound connectivity access from provisioned vms and container hosts on port 443 (needed for agent communication)</p>
</li>
<li>
<p>Internet Connectivity from Appliance (To download from Morpheus' public docker repositories and virtual image catalog)</p>
</li>
<li>
<p>Superuser privileges via the sudo command for the user installing the Morpheus Appliance package.</p>
</li>
<li>
<p>An Appliance License is required for any operations involving provisioning.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="storage">Storage</h3>
<div class="paragraph">
<p>Morpheus needs storage space for a few items. One is for the built-in <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch</a> store (used for log aggregation and stats collection metrics). Morpheus also keeps a workspace and local virtual image cache for doing virtual image conversion and template upload. While the permanent store of these can be offloaded via a Storage Provider some space is still recommended for dealing with non streamable virtual image formats.</p>
</div>
<div class="paragraph">
<p>In many common scenarios it might be prudent to configure a shared datastore on a storage cluster and mounted to <code>/var/opt/morpheus</code> (this is where all user based data and database data is persisted). There are several folders located within here that can be independently located as desired.</p>
</div>
</div>
<div class="sect2">
<h3 id="network-connectivity">Network Connectivity</h3>
<div class="paragraph">
<p>Morpheus primarily operates via communication with its agent that is installed on all managed vms or docker hosts. This is a lightweight agent responsible for aggregating logs and stats and sending them back to the client with minimal network traffic overhead. It also is capable of processing instructions related to provisioning and deployments instigated by the appliance server.</p>
</div>
<div class="paragraph">
<p>The Morpheus Agent exists for both linux and windows based platforms and opens NO ports on the guest operating system. Instead it makes an outbound SSL (https / wss) connection to the appliance server. This is what is known as the <code>appliance url</code> during configuration (in Admin&#8594;Settings). When the agent is started it automatically makes this connection and securely authenticates. Therefore, it is necessary for all vms and docker based hosts that are managed by morpheus to be able to reach the appliance server ip on port 443.</p>
</div>
<div class="paragraph">
<p>Morpheus also utilizes SSH (Port 22) and Windows Remote Management (Port 5389) to initialize a server. This includes sending remote command instructions to install the agent. It is actually possible for Morpheus to operate without agent connectivity (though stats and logs will not function) and utilize SSH/WinRM to perform operations. Once the agent is installed and connections are established SSH/WinRM communication will stop. This is why an outbound requirement exists for the appliance server to be able to utilize port 22 and 5389.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In newer versions of morpheus this outbound connectivity is not mandatory. The agent can be installed by hand or via <code>Guest Process</code> API&#8217;s on cloud integrations like Vmware.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="components">Components</h3>
<div class="paragraph">
<p>The Appliance Server automaticaly installs several components for the operation of Morpheus. This includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RabbitMQ (Messaging)</p>
</li>
<li>
<p>MySQL (Logistical Data store)</p>
</li>
<li>
<p>Elasticsearch (Logs / Metrics store)</p>
</li>
<li>
<p>Redis (Cache store)</p>
</li>
<li>
<p>Tomcat (Morpheus Application)</p>
</li>
<li>
<p>Nginx (Web frontend)</p>
</li>
<li>
<p>Guacamole (Remote console service for clientless remote console)</p>
</li>
<li>
<p>Check Server (Monitoring Agent for custom checks added via UI)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these are installed in an isolated way using chef zero to <code>/opt/morpheus</code>. It is also important to note these services can be offloaded to seperate servers or clusters as desired. For details check the installation section and high availability.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Morpheus comes packaged as a <code>debian</code> or <code>yum</code> based package. It can be installed on a single on/off premise linux based host or configured for high availability and horizontal scaling. Morpheus is currently only supported on Ubuntu 14.04 , CentOS 7.0 or newer, and RHEL 7.0 or newer based hosts (Ubuntu is recommended).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ubuntu 16.04 support is coming soon!
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="debian-install">Debian / Ubuntu</h3>
<div class="paragraph">
<p>To get started installing Morpheus on Ubuntu (14.04 currently) a few prepratory items should be addressed first.</p>
</div>
<div class="paragraph">
<p>First make sure the apt repository is up to date by running <code>sudo apt-get update</code>. It might also be advisable to verify that the assigned hostname of the machine is self resolvable.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If the machine is unable to resolve its own hostname (<code>nslookup hostname</code>) some installation commands will be unable to verify service health during installation and fail.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next simply download the relevant <code>.deb</code> package for installation. This package can be acquired from your account rep or via a free trial request from <a href="https://www.morpheusdata.com">morheusdata.com</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Use the <code>wget</code> command to directly download the package to your appliance server. i.e. <code>wget <a href="https://downloads.gomorpheus.com/path/to/package.deb" class="bare">https://downloads.gomorpheus.com/path/to/package.deb</a></code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next we must install the package onto the machine and configure the morpheus services:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo dpkg -i morpheus-appliance_x.x.x-1.amd64.deb
sudo morpheus-ctl reconfigure</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the installation is complete the web interface will automatically start up. By default it will be resolvable at <code><a href="https://your_machine_name" class="bare">https://your_machine_name</a></code> and in many cases this may not be resolvable from your browser. The url can be changed by editing <code>/etc/morpheus/morpheus.rb</code> and changing the value of <code>appliance_url</code>. After this has been changed simply run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo morpheus-ctl reconfigure
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl start morpheus-ui</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>morpheus-ui</code> can take 2-3 minutes to startup before it becomes available.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are additional post install settings that can be viewed in the Advanced section of the guide.</p>
</div>
<div class="paragraph">
<p>Once the browser is pointed to the appliance a first time setup wizard will be presented. Please follow the on screen instructions by creating the master account. From there you will be presented with the license settings page where a license can be applied for use (if a license is required you may request one or purchase one by contacting your sales representative).</p>
</div>
<div class="paragraph">
<p>More details on setting up infrastructure can be found throughout this guide.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If any issues occur it may be prudent to check the morpheus log for details at <code>/var/log/morpheus/morpheus-ui/current</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="centos-install">CentOS / Redhat Enterprise</h3>
<div class="paragraph">
<p>To get started installing Morpheus on CentOS/RHEL a few prepratory items should be addressed first.</p>
</div>
<div class="paragraph">
<p>First configure firewalld to allow access from users on port 80 or 443 (Or remove it if not required). It is also important to make sure the machine is self resolvable to its own hostname. For RHEL: In order for the guacamole service (remote console) to properly install some additional optional repositories first need added.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>RHEL 7.x Amazon:</strong> <code>yum-config-manager --enable rhui-REGION-rhel-server-optional</code></p>
</li>
<li>
<p><strong>RHEL 7.x:</strong> <code>yum-config-manager --enable rhel-7-server-optional-rpms</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For Amazon users a redhat subscription is not required if the appropriate yum REGION repository is added instead as demonstrated above.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If the machine is unable to resolve its own hostname (<code>nslookup hostname</code>) some installation commands will be unable to verify service health during installation and fail.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next simply download the relevant <code>.rpm</code> package for installation. This package can be acquired from your account rep or via a free trial request from <a href="https://www.morpheusdata.com">morheusdata.com</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Use the <code>wget</code> command to directly download the package to your appliance server. i.e. <code>wget <a href="https://downloads.gomorpheus.com/path/to/package.rpm" class="bare">https://downloads.gomorpheus.com/path/to/package.rpm</a></code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next we must install the package onto the machine and configure the morpheus services:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo sudo rpm -i morpheus-appliance-x.x.x-1.x86_64.rpm
sudo morpheus-ctl reconfigure</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the installation is complete the web interface will automatically start up. By default it will be resolvable at <code><a href="https://your_machine_name" class="bare">https://your_machine_name</a></code> and in many cases this may not be resolvable from your browser. The url can be changed by editing <code>/etc/morpheus/morpheus.rb</code> and changing the value of <code>appliance_url</code>. After this has been changed simply run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo morpheus-ctl reconfigure
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl start morpheus-ui</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>morpheus-ui</code> can take 2-3 minutes to startup before it becomes available.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are additional post install settings that can be viewed in the Advanced section of the guide.</p>
</div>
<div class="paragraph">
<p>Once the browser is pointed to the appliance a first time setup wizard will be presented. Please follow the on screen instructions by creating the master account. From there you will be presented with the license settings page where a license can be applied for use (if a license is required you may request one or purchase one by contacting your sales representative).</p>
</div>
<div class="paragraph">
<p>More details on setting up infrastructure can be found throughout this guide.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If any issues occur it may be prudent to check the morpheus log for details at <code>/var/log/morpheus/morpheus-ui/current</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="additional-options">Additional Options</h3>
<div class="paragraph">
<p>There are several additional configuration options during installation that may be performed. For example, Morpheus provides convenient options for uploading your own SSL certificates as well as externalizing several dependent services.</p>
</div>
<div class="sect3">
<h4 id="system-defaults">System Defaults</h4>
<div class="paragraph">
<p>Morpheus follows several install location conventions. Below is a list of system defaults for convenient management:</p>
</div>
<div class="paragraph">
<p>Installation Location: <code>/opt/morpheus</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Log Location:</strong> <code>/var/log/morpheus</code></p>
<div class="ulist">
<ul>
<li>
<p><strong>Morpheus-UI:</strong> <code>/var/log/morpheus/morpheus-ui</code></p>
</li>
<li>
<p><strong>MySQL:</strong> <code>/var/log/morpheus/mysql</code></p>
</li>
<li>
<p><strong>NginX:</strong> <code>/var/log/morpheus/nginx</code></p>
</li>
<li>
<p><strong>Check Server:</strong> <code>/var/log/morpheus/check-server</code></p>
</li>
<li>
<p><strong>Elastic Search:</strong> <code>/var/log/morpheus/elsticsearch</code></p>
</li>
<li>
<p><strong>RabbitMQ:</strong> <code>/var/log/morpheus/rabbitmq</code></p>
</li>
<li>
<p><strong>Redis:</strong> <code>/var/log/morpheus/redis</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>User-defined install/config:</strong> <code>/etc/morpheus/morpheus.rb</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ssl-certificates">SSL Certificates</h4>
<div class="paragraph">
<p>The default installation generates a self-signed SSL certificate. To implement a third-party certificate:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the private key and certificate to <code>/etc/morpheus/ssl/your_fqdn_name.key</code> and <code>/etc/morpheus/ssl/your_fqdn_name.crt</code> respectively.</p>
</li>
<li>
<p>Edit the configuration file <code>/etc/morpheus/morpheus.rb</code> and add the following entries:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">nginx[ssl_certificate] = path to the certificate file'
nginx[ssl_server_key] = path to the server key file'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Both files should be owned by root and only readable by root, also if the server certificate is signed by an intermediate then you should include the signing chain inside the certificate file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next simply reconfigure the appliance and restart nginx:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo morpheus-ctl reconfigure
sudo morpheus-ctl restart nginx</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="additional-configuration-options">Additional Configuration Options</h4>
<div class="paragraph">
<p>There are several other options available to the <code>/etc/morpheus/morpheus.rb</code> file that can be useful when setting up external service integrations or high availability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">mysql[<span class="string"><span class="delimiter">'</span><span class="content">enable</span><span class="delimiter">'</span></span>] = <span class="predefined-constant">false</span>
mysql[<span class="string"><span class="delimiter">'</span><span class="content">host</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">52.53.240.28</span><span class="delimiter">'</span></span>
mysql[<span class="string"><span class="delimiter">'</span><span class="content">port</span><span class="delimiter">'</span></span>] = <span class="integer">10004</span>
mysql[<span class="string"><span class="delimiter">'</span><span class="content">morpheus_db</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">morpheusdb01</span><span class="delimiter">'</span></span>
mysql[<span class="string"><span class="delimiter">'</span><span class="content">morpheus_db_user</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">merovingian</span><span class="delimiter">'</span></span>
mysql[<span class="string"><span class="delimiter">'</span><span class="content">morpheus_password</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">Wm5n5gXqXCe9v52</span><span class="delimiter">'</span></span>
rabbitmq[<span class="string"><span class="delimiter">'</span><span class="content">enable</span><span class="delimiter">'</span></span>] = <span class="predefined-constant">false</span>
rabbitmq[<span class="string"><span class="delimiter">'</span><span class="content">vhost</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">zion</span><span class="delimiter">'</span></span>
rabbitmq[<span class="string"><span class="delimiter">'</span><span class="content">queue_user</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">dujour</span><span class="delimiter">'</span></span>
rabbitmq[<span class="string"><span class="delimiter">'</span><span class="content">queue_user_password</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">5tfg9n2iBifzW5c</span><span class="delimiter">'</span></span>
rabbitmq[<span class="string"><span class="delimiter">'</span><span class="content">host</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">54.183.196.152</span><span class="delimiter">'</span></span>
rabbitmq[<span class="string"><span class="delimiter">'</span><span class="content">port</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">10008</span><span class="delimiter">'</span></span>
rabbitmq[<span class="string"><span class="delimiter">'</span><span class="content">stomp_port</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">10010</span><span class="delimiter">'</span></span>
redis[<span class="string"><span class="delimiter">'</span><span class="content">enable</span><span class="delimiter">'</span></span>] = <span class="predefined-constant">false</span>
redis[<span class="string"><span class="delimiter">'</span><span class="content">host</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">52.53.240.28</span><span class="delimiter">'</span></span>
redis[<span class="string"><span class="delimiter">'</span><span class="content">port</span><span class="delimiter">'</span></span>] = <span class="integer">10009</span>
elasticsearch[<span class="string"><span class="delimiter">'</span><span class="content">enable</span><span class="delimiter">'</span></span>] = <span class="predefined-constant">false</span>
elasticsearch[<span class="string"><span class="delimiter">'</span><span class="content">cluster</span><span class="delimiter">'</span></span>] = <span class="string"><span class="delimiter">'</span><span class="content">nebuchadnezzar</span><span class="delimiter">'</span></span>
elasticsearch[<span class="string"><span class="delimiter">'</span><span class="content">es_hosts</span><span class="delimiter">'</span></span>] = {<span class="string"><span class="delimiter">'</span><span class="content">52.53.214.68</span><span class="delimiter">'</span></span> =&gt; <span class="integer">10003</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These settings allow one to externally configure and scale mysql, elasticsearch, redis, and rabbitmq which is critical for a high availability setup.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading">Upgrading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Morpheus provides a very simple and convenient upgrade process. In most cases it is simply a matter of installing the new package on top of itself and reconfiguring the services.</p>
</div>
<div class="sect2">
<h3 id="debian-ubuntu">Debian / Ubuntu</h3>
<div class="paragraph">
<p>Simply download the latest package or request the latest package from your account service representative.
Then run the install process as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo dpkg -i morpheus-appliance_x.x.x-1.amd64.deb
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl reconfigure
sudo morpheus-ctl start morpheus-ui</code></pre>
</div>
</div>
<div class="paragraph">
<p>This typically is enough to complete a full upgrade. Databases will automatically be migrated upon restart of the application and service version upgrades will automatically be applied.</p>
</div>
</div>
<div class="sect2">
<h3 id="centos-rhel">CentOS / RHEL</h3>
<div class="paragraph">
<p>Yum based package upgrades are a little different. In this case we want to run a <code>rpm -U</code> command as the package manager is slightly different.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo morpheus-ctl stop morpheus-ui
sudo sudo rpm -U morpheus-appliance-x.x.x-1.x86_64.rpm
sudo morpheus-ctl reconfigure
sudo morpheus-ctl start morpheus-ui</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Sometimes it may be necessary to restart all appliance services on the host. In order to do this simply type <code>sudo morpheus-ctl restart</code>. This will restart ALL services.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="provisioning">Provisioning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several capabilities in the Morpheus provisioning engine. Things ranging from application / service deployments via containers, virtual machines, and even bare metal. Deployment management and app template construction are also core aspects of the provisioning engine. Take advantage of custom tasks and workflows within any environment by building tasks and workflows from those tasks. There is a lot of information to cover with regards to provisioning but Morpheus makes it intuitive and smooth.</p>
</div>
<div class="sect2">
<h3 id="instances">Instances</h3>
<div class="paragraph">
<p>Instances is a great starting point for taking advantage of self service features and spinning up both vms and containers. In Morpheus it may be advisable to cover the definition of a few terms used within the application so as to reduce confusion.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Instance</strong> - A set of containers or virtual machines that can correlate to a single horizontally scalable entity or a service suite like a database. (It is important to note that an instance can contain one or more containers/vms depending on the instance type and configuration).</p>
</li>
<li>
<p><strong>Container</strong> - Typically a docker container provisioned via a Morpheus Docker host.</p>
</li>
<li>
<p><strong>Virtual Machine</strong> - A virtualized compute server provisioned onto various hypervisor hosts.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="getting-started">Getting Started</h4>
<div class="paragraph">
<p>The instance catalog is the one stop shop for selecting items to be provisioned and pieced together. It contains not only basic container and vm options but also tailored services for SQL databases, NoSQL databases, cache stores, message busses, web servers, and even full fledged apps. The list contains a lot of items to choose from and they are represented to the user based on what provisioning engines are enabled and integrated in the Morpheus environment.</p>
</div>
<div class="paragraph">
<p>To get started, simply click the <code>+ Add Instance</code> button in the upper right of the <code>Provisioning &#8594; Instances</code> section. A modal will display allowing the catalog to be searched. Once an item is selected it is just a matter of following the steps through the wizard.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The instance catalog can be customized via role based access control thereby restricting access to non sanctioned catalog items, as well as added to via the <code>Provisioning &#8594; Library</code> section. It is completely customizable.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next step will ask for a Group and Cloud to be selected. The Group is an abstract representation that can contain multiple cloud integrations. These cloud integrations can also be in multiple groups and is also useful for using role based access control to restrict provisioning access and set retainment policies. If the environment is new and these do not yet exist, It may be advisable to refer to the main section on Getting started by setting up some cloud integrations and infrastructure first. The wizard continues by allowing us to choose a name for the instance as well as an environment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Currently the Environment option is mostly useful for presenting the user with informative metadata around the instance when coming back to it later.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Moving on, it is now time to configure the Instance. Depending on the option that was chosen and the Instance Configuration that is chosen fields will change. This can include cloud specific fields (i.e. Datastore for Vmware or Network). There will also be options like initial username. Some of these fields are optional and will be represented as such.</p>
</div>
<div class="paragraph">
<p>Configuration options provided in this screen are very powerful. An example is Mysql where a Master/Slave or Master/Master layout can be selected. These configurations will automatically deploy two MySQL vms or containers and link them together to provide replication. These types of configurations exist for a wide range of instance types and are optimized for high performance and scale. It is even possible to provision entire sharded Mongo clusters.</p>
</div>
<div class="paragraph">
<p>One last step before the instance can be provisioned is the <code>Automation</code> step. This wizard step may or may not appear depending on the capabilities of the instance type or previous configurations in the account. It is here one can easily select a post provisioning workflow to run ( see more on Tasks and Workflows), assign a load balancer, or even configure the backup job that gets created.</p>
</div>
<div class="paragraph">
<p>Now that the steps are completed for provisioning the selected instance type , simply review your selections and complete. The instance will automatically show up in the instances list and its provisioning state will be represented. Depending on what was provisioned this step can range from seconds to minutes (typically a container configuration will be rather quick if the instance type has previously been provisioned before.)</p>
</div>
</div>
<div class="sect3">
<h4 id="instance-details">Instance Details</h4>
<div class="paragraph">
<p>Once the instance is completed, the status will change to "Running". Clicking on an instance will present the viewer with loads of useful information, including stats like CPU, Memory, Storage, IOPS, and even Network throughput. There are several sections within an Instance page that provide useful capabilities to the user.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Summary - Stats and status information</p>
</li>
<li>
<p>Deploy - Track deployment history for instance types that support deployments or manually kick off a deployment (only visible for instance types that support deployments)</p>
</li>
<li>
<p>Settings - Some instance types support custom configuration settings (i.e. mysql presents the my.ini)</p>
</li>
<li>
<p>Network - Useful for configuring security groups and access to the instance.</p>
</li>
<li>
<p>Monitoring - Quick summary of the monitoring system and all checks that were configured to test teh state of the instance</p>
</li>
<li>
<p>Backups - Quick backup dashboard. Useful for viewing historical backups as well as kicking off new ones.</p>
</li>
<li>
<p>Logs - View all aggregated logs from the containers or vms representing the instance.</p>
</li>
<li>
<p>Environment - View the environment variables presented to the instances or exported by the instances via Apps (more on this in the Apps section). Even see Imported environment variables that may be referenced by the running instance.</p>
</li>
<li>
<p>Scale - For instances that support load balancing and auto scaling. Easily configure auto scaling thresholds and load balancer settings that pertain to a particular instance.</p>
</li>
<li>
<p>Console - Access the instance or container via a clientless Console supporting SSH, RDP, VNC, and even hypervisor level remote consoles.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apps">Apps</h3>

</div>
<div class="sect2">
<h3 id="deployments">Deployments</h3>
<div class="paragraph">
<p>The deployments section provides very useful PaaS like capabilities when it comes to deploying applications into the newly provisioned environment. These can be uploaded directly from the UI, pulled from a build server, pulled from a public or private Git repository or even via the API and the various plugins created, such as Jenkins, and Gradle to support continuous build / integration workflows.</p>
</div>
<div class="paragraph">
<p>A deployment can be considered a set of versions that relate to a particular project or application being deployed. This allows one to keep track of a history of versions and easily reuse these deployment versions across instances that may exist in different environments. An example might be to deploy a version from a deployment to a staging instance and (once approved) also deployed into production.</p>
</div>
<div class="sect3">
<h4 id="getting-started-2">Getting Started</h4>
<div class="paragraph">
<p>Getting started with deployments is easy. They can vary slightly for the application stack being deployed but the simplest phase of a deployment is adding a version and adding the appropriate files to the deployment archive that are needed for the application to run. This could be a single file like a <code>WAR</code> file for Tomcat, or it could be hundreds of files for stacks like <code>Ruby on Rails</code>.</p>
</div>
<div class="paragraph">
<p>There are a few ways to create a deployment. The first is to use the <code>Provisioning &#8594; Deployments</code> section of the application to create them. Simply add a new deployment and give it a name representing the application that is being deployed. Once a deployment is created select the deployment to view its versions (which will be empty to start). Next, its time to add a version.</p>
</div>
<div class="paragraph">
<p>When adding a version there are several options. There are 3 types represented by the UI. These include File, Fetch, and Git respectively. A File deployment allows the user to simply drag their files into the file explorer presented by the dialog. This file explorer can take single files or entire file trees (If files exist in subfolders then only the Chrome browser is supported due to browser limitations at the time of this writing). This is also the common type that is represented when files are uploaded via the CLI, or available build tool integration plugins. Once the files have completed their upload simply save the version for use.</p>
</div>
</div>
<div class="sect3">
<h4 id="git">Git</h4>
<div class="paragraph">
<p>For performing git based deploys Morpheus supports both public and private repositories. To utilize a private git repository the add version dialog will display a public keypair that can be added to the git service for authentication purposes. Currently this keypair is shared across the account and not specifically scoped to the user so it may be advisable to connect this integration to a deployment account in git. From here either a <code>ssh</code> or <code>https</code> git url can be entered along with a git branch or tag name. Once the version is saved, this repository will be copied down into the deployment archive for use.</p>
</div>
</div>
<div class="sect3">
<h4 id="fetch">Fetch</h4>
<div class="paragraph">
<p>Fetch based deployments are pretty straightforward. Simply enter a url to a file representing the deployment. This can be a single file (in which case it will just be added to the deployment archive singularly) or it can be a zip file (which will automatically be expanded into the archive). HTTP Authentication options can also be entered if the url requires some form of basic authentication scheme for access by the appliance.</p>
</div>
</div>
<div class="sect3">
<h4 id="deploying-to-an-instance">Deploying to an Instance</h4>
<div class="paragraph">
<p>Now that a version has been added to a deployment it is easy to push that deploy out to any instance provisioned within Morpheus. Simply navigate to the specific Instance that needs deployed to. On the Instance detail page there is a tab called <code>Deploy</code>. From here simply add a deploy. The dialog will ask firstly from which deployment the deploy is from (or allow you to create a new one on the spot) , and secondly which version to deploy (also with the option to add one on the fly). The next step of the wizard will display any configuration options that might be specific to the instance type being deployed to (i.e. <code>CATALINA_OPTS</code> for Tomcat or <code>Java Command</code> for java) as well as the file explorer and deployment type selections for review (or use when creating a new version on the fly). Fill in the required items then simply hit complete. The deploy will now be asynchronously sent off to all of the virtual machines or containers within the instance in a rolling restart and the deployment status will be represented.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
When deploying to an instance, the custom configuration options that were entered during the previous deployment are automatically carried forward allowing one to edit them or leave them as is.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="rolling-backwards-and-forwards">Rolling Backwards and Forwards</h4>
<div class="paragraph">
<p>Because of the tracked history of deployments kept within Morpheus, the deploy tab of instance detail makes it easy to choose a previously run deployment and jump back to it in the event of a failed deployment. The history will automatically be updated and the configuration, as well as data from the previous deployment state of the instance will be restored.</p>
</div>
</div>
<div class="sect3">
<h4 id="offloading-storage">Offloading Storage</h4>
<div class="paragraph">
<p>Since a full history of the backup buils are kept in Morpheus, as the appliance grows it becomes necessary to change where these are stored. On a fresh install these are stored on the local appliance in <code>/var/opt/morpheus</code> or wherever the master account may have changed the configuration to point to. It is also possible to adjust the deployment archive store by creating a <code>Storage Provider</code> tied to an S3 compatible object store, Openstack Swift object store, or any other type of mountpoint provided. This option can be adjusted in <code>Admin&#8594;Provisioning</code> once a storage provider is created within the account.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="infrastructure">Infrastructure</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="monitoring">Monitoring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Morpheus provides great monitoring features out of the box. Anything provisioned within Morpheus automatically gets a check created in the monitoring service. These checks are organized heirarchically in "Groups" and "Apps". This makes it easy to gain a perspective as to what a customer or full stack facing impact is in the event of a particularly instance failure. This also takes into account redundancy layers when it comes to calculating the applications overall uptime percentage.</p>
</div>
<div class="paragraph">
<p>There are also several integrations built into the monitoring subsystem of Morpheus including App Dynamics , New Relic, and even Service Now integration.</p>
</div>
<div class="sect2">
<h3 id="checks">Checks</h3>
<div class="paragraph">
<p>The Monitoring system is composed of individual checks. A check is created for every container or vm that is provisioned through Morpheus. One interesting thing about these checks is they are type aware. There are several different built in check types that are selected based on the service or instance type that is being provisioned. These range from database type checks to web checks and message checks. They are highly configurable and also feature fallback check types for those more generic use cases.</p>
</div>
<div class="paragraph">
<p>Checks can be customized to run custom queries, check queue sizes, or even adjust severity levels and check intervals. All of these things can be controlled from the Checks sub tab within Monitoring.</p>
</div>
<div class="sect3">
<h4 id="health">Health</h4>
<div class="paragraph">
<p>A check can have 3 health states. They are Failed, Warning (Recovering), and Healthy. When a check test fails the system automatically reattempts the check after 30 seconds to eliminate false positives. This will convert the check into a <code>Failed</code> state and raise the appropriate severity incident depending on the grouping of the check. When a check recovers it automatically goes into a Warning state. This will remain in the warning state until 10 successful check runs have completed.</p>
</div>
</div>
<div class="sect3">
<h4 id="options">Options</h4>
<div class="paragraph">
<p>All check types have several core options and some of these default options can be configured in <code>Admin &#8594; Monitoring</code>. This includes the default check interval time. By default a check is run every 5 minutes. This can however be changed to run as frequently as once every minute.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Max Severity</strong>: The maximum severity level impact for a created incident that can occur if the check fails (defaults to Critical).</p>
</li>
<li>
<p><strong>Check Interval</strong>: The frequency with which a check is run (default 5 minutes).</p>
</li>
<li>
<p><strong>Affects Availability</strong>: Whether or not this check impacts overall system availability calculations.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ssh-tunneling">SSH Tunneling</h4>
<div class="paragraph">
<p>In many cases when it comes to monitoring databases, and services they may not be fronted on the public ips for external monitoring. To reach these safely, and securely Morpheus provides an SSH Tunneling mechanism for its check servers. This allows the check to be confirmed via an ssh port tunnel securely using a keypair.</p>
</div>
</div>
<div class="sect3">
<h4 id="check-servers">Check Servers</h4>
<div class="paragraph">
<p>On a base installation of Morpheus a single <code>check server</code> is installed on the appliance. This is used for running any custom user checks. This services connects to the provided rabbitmq services and can be moved off or even scaled horizontally onto sets of check servers. All other checks that are related to provisioned containers or vms are executed by the installed agent on the guest OS or Docker host.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apps-groups">Apps &amp; Groups</h3>
<div class="paragraph">
<p>One great feature of the monitoring system is the ability to organize checks by groups and apps. This provides a nice convenient way to determine what a customer facing impact might be for a single failure as well as representing redundancy via groupings.</p>
</div>
<div class="paragraph">
<p>It is important to note the relationship of apps, groups, and even checks with regards to instances provisioned within Morpheus. For every <code>Instance</code> that is provisioned: A monitoring <code>Group</code> is created and a <code>Check</code> is added to that group for every <code>Container</code> or <code>Virtual Machine</code> within that Instance. This makes sense such that as an Instance is scaled out horizontally (containers/vms added to it) The monitoring system accurately represents the layers of redundancy. An <code>App</code> simply maps to a Provisioning <code>App</code> and should be pretty straightforward to understand.</p>
</div>
<div class="sect3">
<h4 id="groups">Groups</h4>
<div class="paragraph">
<p>It is also possible to organize custom checks in this hierarchical structure by manually adding or editing a Group or App. Groups can only contain checks and can be edited or created in <code>Monitoring &#8594; Groups</code>. Besides simply adding and removing checks to a group there are a few other useful options that can be customized in a group.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Min Checks</strong>: This specifies the minimum number of checks within the group that must be happy to keep the group from becoming unhealthy.</p>
</li>
<li>
<p><strong>Max Severity</strong>: The maximum severity incident a failed check may create. This setting overrides a checks Max Severity setting.</p>
</li>
<li>
<p><strong>Affects Availability</strong>: Whether or not a failed group impacts system wide availability calculations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some useful information can also be seen on the detail page of a check. For example, the average response time of all checks within the group, or an aggregated check history can be viewed.</p>
</div>
</div>
<div class="sect3">
<h4 id="apps-2">Apps</h4>
<div class="paragraph">
<p>Apps are very useful for seeing an aggregation of failures, or impact based on a set of checks and groups. Apps typically correlate to apps created in provisioning but can also be manually created and organized. They can be great for visualizing the customer impact a failure might have or even keeping up on a screen in a NOC. There are a few useful options as well with regards to Apps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Max Severity</strong>: The maximum severity incident a failed app may create. This setting overrides check and group Max Severity settings.</p>
</li>
<li>
<p><strong>Affects Availability</strong>: Whether or not a failed app impacts system wide availability calculations.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="incidents">Incidents</h3>
<div class="paragraph">
<p>Incident management is very important in any IT Operations environment. The ability to notify the appropriate people of an outage that requires immediate attention is critical to reducing recovery time and even preventing potential customer facing impacts. Because of this, Morpheus provides incident management features as well as external integrations out of the box.</p>
</div>
<div class="paragraph">
<p>Incidents can be found in the <code>Monitoring&#8594;Incidents</code> section. When a check fails, an incident is automatically raised. These can vary in severity based on the user configured check severities as well as the group hierarchy (representative of redundancy).</p>
</div>
<div class="paragraph">
<p>Incidents are also grouped. If an application is impacted and multiple checks fail for that application they automatically get grouped together in one Incident that can fluctuate or escalate in severity as time progresses. These incidents can be muted so as not to affect availability and they can also be resolved manually with an option to detail resolution information.</p>
</div>
<div class="paragraph">
<p>There are also integrations and API&#8217;s for integrating with existing corporate workflows when it comes to incident management.</p>
</div>
</div>
<div class="sect2">
<h3 id="alerts">Alerts</h3>
<div class="paragraph">
<p>There are several ways to configure alerts and notifications within Morpheus. Users can be notified via Email or SMS as well as several other direct integrations. These integrations include PagerDuty, Alert Ops, Victor Ops, and even Slack chat Channel notifications (or optionally via the ServiceNow integration).</p>
</div>
<div class="sect3">
<h4 id="contacts">Contacts</h4>
<div class="paragraph">
<p>To configure user notifications a contact must first be created in <code>Monitoring &#8594; Contacts</code>. These contacts can be one of a few types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Contact</strong>: Used for either Email or SMS</p>
</li>
<li>
<p><strong>Web Hook</strong>: Used for posting a notification to a web endpoint or Alert Ops.</p>
</li>
<li>
<p><strong>Slack Hook</strong>: Used for posting notifications to a <a href="https://slack.com/">Slack</a> channel.</p>
</li>
<li>
<p><strong>VictorOps</strong>: Provides a web post format consistent with the required notification format for Victor Ops.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most of these options provide convenient examples and information when configuring the contact. Once they are configured contacts can freely be used to build <code>Alert Rules</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="alert-rules">Alert Rules</h4>
<div class="paragraph">
<p>Alert Rules provide a powerful means to configure who gets notified in various scenarios. These scenarios include targetting specific checks, groups, or apps , and adding the appropriate recipients to be notified during a situation in which those filters are impacted.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Min Duration</strong>: This setting delays notification to the recipients by the entered number of minutes required for the incident to be opened.</p>
</li>
<li>
<p><strong>Min Severity</strong>: Some executives might want to be notified of an outage but only if the severity impact goes above a certain level. This is very useful for scoping escalations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add recipients to a rule just start typing their name in the Recipients section towards the button of the edit form. An auto-complete list will start populating with contact names. Once one is selected a delivery method can be selected as well as whether or not they should be notified of any escalation changes and/or closed incidents.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
A recipient can be in multiple alert rules and can even be configured to be notified via different methods depending on the rule. A useful example might be to alert someone via email for lower severity incidents but SMS for critical severity levels.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configuring-notification-services">Configuring Notification Services</h4>
<div class="paragraph">
<p>By default Morpheus provides email notification services using the <code>morpheusdata.com</code> email address. It may be advisable to customize these services to use another mail delivery service.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="integrations">Integrations</h3>
<div class="paragraph">
<p>While Morpheus provides a fantastic means for determining uptime and availability of both services and vms sometimes more is needed. A good example of this is performance application monitoring. To solve this several external integrations are provided out of the box. Even some external integrations with regards to incedent management are provided.</p>
</div>
<div class="sect3">
<h4 id="appdynamics">AppDynamics</h4>
<div class="paragraph">
<p>AppDynamics is a very powerful performance and application monitoring tool. It featues advanced correlation features and profiling capabilities for a very wide range of application platforms including native Docker support. Due to the level of capabilities of AppDyanmics there are more required settings to integrate it with Morpheus. To get started expand the section in <code>Admin &#8594; Monitoring</code> related to AppDynamics and toggle it to Enabled. There are several fields here that need filled out. Once completed hit save and all hosts will automatically be configured to install the AppDynamics agent.</p>
</div>
<div class="paragraph">
<p>AppDynamics is capable of bein run as a paid SaaS based service as well as an on premise installation and Morpheus supports both configurations. Most input fields related to connecting to AppDynamics provide helpful tips as to what information exactly needs provided and where to acquire it.</p>
</div>
</div>
<div class="sect3">
<h4 id="newrelic">NewRelic</h4>
<div class="paragraph">
<p>New Relic is a very popular service based performance monitoring tool. It supports a wide variety of application platforms and is a breeze to configure with Morpheus. Another great feature of new relic is its ability to monitor the server applications run on and provide additional stats. To do this an agent needs to be installed and configured on each server. Fortunately, this is performed automatically for every vm and docker host provisioned within Morpheus. To turn on the integration simply go to <code>Admin &#8594; Monitoring</code> and expand the section titled "New Relic". There it is simply a matter of toggling the Enabled setting to on and entering the New Relic account API Key.</p>
</div>
</div>
<div class="sect3">
<h4 id="service-now">Service Now</h4>
<div class="paragraph">
<p>Service now integration is provided out of the box with Morpheus. To add a service now integration simply visit the 'Monitoring Settings' section in <code>Admin &#8594; Monitoring</code>. This allows one to map incident severity levels to equivalent severities in ServiceNow.</p>
</div>
<div class="paragraph">
<p>To enable service now simply expand the section labelled "ServiceNow" in <code>Admin &#8594; Monitoring</code>. Toggle the enabled flag and enter the <code>Host</code>, <code>User</code>, and <code>Password</code> information required to connect to ServiceNow. The other options below include behaviors upon new incidents being opened and old incidents closing. It also includes a table for mapping Morpheus incident serverity levels to their ServiceNow counterparts.</p>
</div>
<div class="paragraph">
<p>There are several other useful service now integrations planned for future releases and will be discussed as those features come out.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging">Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The logging architecture backing Morpheus uses the latest and greatest technologies and standards to be able to service large amounts of log traffic as well as facilitate easy viewing. Utilizing elasticsearch behind the scenes and buffered log transmission protocols Morpheus provides a highly efficient and highly scalable solution for capturing log data from anything provisioned via the system. By utilizing common formats (syslog) it is also very easy to forward logs to external third party log services.</p>
</div>
<div class="sect2">
<h3 id="configuration">Configuration</h3>
<div class="paragraph">
<p>Logging configuration can be setup in the <code>Admin &#8594; Logs</code> section. There are a couple useful settings here including customizing the retainment policy (by default 7 days). This could be expanded to years for PCI Compliance purposes or other potential requirements an organization might have.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When increasing the retainment policy of the logging system it may be necessary to scale out the elasticsearch cluster. Please refer to the relevant information with regards to scaling elasticsearch and advanced installation options for externalizing the elasticsearch cluster.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This area of administration also provides options for setting custom syslog forward rules.
These rules are applied on each individual host therefore keeping the Morpheus appliance itself out of the data plane. For information on different syslog formatting rules please refer to the <a href="http://www.rsyslog.com/sending-messages-to-a-remote-syslog-server/">rsyslog</a> documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="usage">Usage</h3>
<div class="paragraph">
<p>Morpheus automatically sets up and configures logging for all of the standard catalog items provisioned through morpheus. This includes both Docker containers as well as virtual machines. Simple view instance specific logs in instance detail via the "Logs" tab.</p>
</div>
<div class="paragraph">
<p>There are several filtering capabilities built into the logging ui with more being added continually. Easily toggle log level filters from the dropdown or change the date range filter using the handy date filter component. A chart is also displayed above logs representing the log counts by level over the selected time range (default last 24 hours). A handy pattern search is also available with some rather capable features based on Lucene search syntax.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
It may be useful to review the Lucene search query syntax for powerful use cases: <a href="https://lucene.apache.org/core/2_9_4/queryparsersyntax.html">Syntax Guide</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are several other places logs can be viewed. Not only can they be viewed across an application in app detail but also across all instances in the account. The main level <code>Logs</code> section provides an ability to query all logs produced by the system. It is also possible to view host specific logs on a docker host by viewing the host detail page via <code>Infrastructure</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
New features are on the roadmap for the main logs section including saved searches, and handy charting dashboards for garnering insights out of log data.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="integrations-2">Integrations</h3>
<div class="paragraph">
<p>While the built in logging solution provided by Morpheus is sufficient for most, there are some scenarios in which a more advanced logging system may be desired or already in place. To facilitate this Morpheus makes it easy to add custom syslog rules as well as built in direct integrations with Splunk and Logrythm. All integrations pertaining to logging can be configured in the <code>Admin &#8594; Logs</code> section.</p>
</div>
<div class="sect3">
<h4 id="splunk">Splunk</h4>
<div class="paragraph">
<p>To configure Splunk simply create a syslog listener configuration in Splunk. Then it is simply a matter of expanding the section in Logging settings pertaining to Splunk and filling out the host and port of the appender. Once saved, all hosts managed by Morpheus will be configured to forward logs to the target Splunk listener.</p>
</div>
</div>
<div class="sect3">
<h4 id="logrythm">Logrythm</h4>
<div class="paragraph">
<p>Configuring logrythm is much like configuring Splunk. Simply toggle the enabled flag in the Logrythm section to enabled and fill in the Host, and Port information for the Logrythm listener.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="administration">Administration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several administrative integrations built into Morpheus that make it great to work with within any organization ranging from small to large. Especially, with its built in white label support and multitenancy capabilities, managed service providers have a wide range of capabilities when it comes to managing customer accounts and users.</p>
</div>
<div class="sect2">
<h3 id="roles">Roles</h3>
<div class="paragraph">
<p>Morpheus provides amazingly robust Role-based access control. Almost every aspect of the UI and API can be controlled via role management. Roles can be assigned as base roles for subaccounts where in sub accounts can manage their own roles relative to the main role. Other aspects can be controlled via Roles as well, such as which infrastructure groups users have visibility into or capabilities of provisioning into. Usage limits can even be assigned and sanctioned instance catalog items!</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/administration/roles.png" alt="Role management Administration page">
</div>
<div class="title">Figure 1: Role management Administration page</div>
</div>
<div class="paragraph">
<p>There are 2 base roles provided by Morpheus upon first installation. They are "System Admin", and "Account Admin" (Can be noted on the management page by having a scope of 'System'). The "Super Admin" role is a special role that only the master account should have access to. It provides access to settings that can apply globally across all accounts in the system. The "Account Admin" role is just a base role that is seeded in for use as the default role when creating new subaccounts. This default role can be copied or modified. If it desired that an account  take on a different default base role, this can be done from the <code>Admin &#8594; Settings</code> section under "Account Management Settings". You can also assign a base role to an account in the <code>Admin &#8594; Accounts</code> section or directly to a user in <code>Admin &#8594; Users</code>.</p>
</div>
<div class="paragraph">
<p>In the <code>Account &#8594; Roles</code> section there are 2 types of ways to edit a role. One is to click a role&#8217;s name to view its permission set and manipulate its different access levels. The other is to click the edit icon on the right. In this mode you can rename a role or set usage limits (i.e. max memory usage or max storage usage for users assigned to this role).</p>
</div>
<div class="paragraph">
<p>When it comes to managing a role there are 4 subsections. They are "Feature Access", "Group Access", "Cloud Access", and "Instance Type Access". A couple of these sections do not apply in certain scenarios (depending on if the role is being used as an Account base role or a user role).</p>
</div>
<div class="sect3">
<h4 id="feature-access">Feature Access</h4>
<div class="paragraph">
<p>Features, are aspects of both the UI and API that a user may have access to at any given point. Morpheus also has the ability to control access level of specific features rather than simply turning a feature on or off. These difference scopes appear in the dropdowns to the right of each feature (a dropdown will not appear if the role is readonly visible).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/administration/role_features.png" alt="Role detail features section">
</div>
<div class="title">Figure 2: Example of features list when clicking into a role detail page</div>
</div>
<div class="paragraph">
<p>To change the scope of a feature simply change the selected option in the dropdown and the change will automatically be applied and propagated to anyone using the Role. There are different scope capabilities depending on the feature and more can be added as well as necessary. These include scopes like <code>None</code>, <code>View</code>, <code>Read</code>, and <code>Full</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="group-access">Group Access</h4>
<div class="paragraph">
<p>Group access allows for the restriction in provisioning and management of specific host groups within Morpheus. It is useful to scope instances that may be provisioned into certain groups with respective cloud integrations. This makes it more organized and allows for scoped policy controls and team management. It is also important to note that Groups are account specific therefore any adjustments made to group access levels for the use on an Account scoped role will have no affect. For that one must use the "Cloud Access" section.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/administration/role_groups.png" alt="Role detail group access section">
</div>
<div class="title">Figure 3: Example of groups list when clicking into a role detail page</div>
</div>
<div class="paragraph">
<p>In Group Access, each group is listed with an access level dropdown similar to how Feature Access worked. But at the top there is also a "Global Access" setting. When this is set to anything other than Custom, all dropdowns for individual groups are disabled. Global allows for a setting to be assigned globally across all groups in the account (i.e. Full, Read, or even None).</p>
</div>
</div>
<div class="sect3">
<h4 id="cloud-access">Cloud Access</h4>
<div class="paragraph">
<p>Cloud access works identically to Group Access except it is referring to cloud integrations the account has access to. While these various cloud integrations can be scoped to specific groups to allow provisioning, it is also possible to restrict access to them and even assign them to account scoped roles so that sub accounts can or cannot create their own groups and instances for that cloud.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/administration/role_clouds.png" alt="Role detail cloud access section">
</div>
<div class="title">Figure 4: Example of clouds list when clicking into a role detail page</div>
</div>
<div class="paragraph">
<p>Just like Group Access, different scoping dropdowns exist on the bottom. It is also important to note that it is possible to grant access to a cloud for a subaccount via cloud access however the visibility and ownership of the cloud also play a part as to wether or not a user can view or use said cloud integration. A cloud&#8217;s visibility can be set only by the master account and determines wether or not a specific cloud integration is public for all accounts to use or private / for the account in question&#8217;s use only. In cloud edit it is also possible (as the master account) to assign a specific cloud integration to an account. This makes it so that only the subaccount can utilize the cloud integration also requiring cloud access be properly configured.</p>
</div>
</div>
<div class="sect3">
<h4 id="instance-type-access">Instance Type Access</h4>
<div class="paragraph">
<p>Instance Type access controls what different instance types a user or account are allowed to provision. This can be useful in an organization where one might want to control / sanction certain application types only within the environment. It also may be used to scope provisioning rights for say a DBA to only be able to provision database instances vs. full fledged application stacks. Even custom catalog items will appear in this list so if a custom application template is being utilized within Morpheus, access to provisioning it&#8217;s individual pieces can also be controlled.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/administration/role_clouds.png" alt="Instance Type cloud access section">
</div>
<div class="title">Figure 5: Example of instance types list when clicking into a role detail page</div>
</div>
<div class="paragraph">
<p>Similar to the last three sections, the default Global Access dropdown grant everyone access to everything in the appliance that can be provisioned onto (including newly added instance types). Simply set this to "Custom" when it is desired to use more fine grained control.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="identity-sources">Identity Sources</h3>
<div class="paragraph">
<p>There are several built in single sign-on integrations included with Morpheus. These can be configured via the <code>Identity Sources</code> button in <code>Admin &#8594; Accounts</code>. These integrations include linking capabilities with LDAP, Active Directory, Okta, and Jump Cloud. One can even map these sign on tools to equivalent roles in Morpheus so at first log in users are assigned the appropriate role.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/administration/identity_sources.png" alt="Identity Source Management Integrations">
</div>
<div class="title">Figure 1: Identity Source Management Integrations</div>
</div>
<div class="sect3">
<h4 id="active-directory">Active Directory</h4>
<div class="paragraph">
<p>Active Directory is Microsoft&#8217;s primary authentication service widely used in Enterprise organizations and even via Microsoft&#8217;s cloud services. While Active Directory also supports LDAP protocol support (which Morpheus can integrate with as well), the main active directory integration can also be utilized. It is even possible to map Active Directory groups to equivalent Roles within Morpheus.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To use Active Directory, a valid / trusted SSL certificate must be in place on the Active Directory services (self signed will not work).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Adding an Active Directory integration is fairly straightforward. Simply click the 'Add Integration' button in Identity Sources and from the type dropdown choose "Active Directory".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/administration/add_active_directory.png" alt="Modal form entry for Active Directory">
</div>
<div class="title">Figure 2: Modal form entry for Active Directory</div>
</div>
<div class="paragraph">
<p>The following fields are important for integrating active directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name:</strong> Unique name for authentication type.</p>
</li>
<li>
<p><strong>AD Server:</strong>  Hostname or IP address of AD Server.</p>
</li>
<li>
<p><strong>Domain:</strong>  Domain name of AD Domain.</p>
</li>
<li>
<p><strong>Binding Username:</strong>  Service account username for bind user.</p>
</li>
<li>
<p><strong>Binding Password:</strong>  Password for bind service account.</p>
</li>
<li>
<p><strong>Default Role:</strong>  The default role a user is assigned if no group is listed under AD user that maps under Role Mappings section.</p>
</li>
<li>
<p><strong>Service Account Holder:</strong> This is the admin account type in Morpheus and an AD group can be created and populated to a user that this role should be assigned.  Roles are assigned dynamically based on group membership.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Make sure to check the sync login box which will allow Morpheus to sync the AD account on the Morpheus Appliance.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now users can login to the UI via their active directory username.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Only the username is required with password not the username@domain.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vmware">VMware Cloud</h2>
<div class="sectionbody">
<div class="paragraph">
<p>VMware is a very common cloud integration choice supported by Morpheus. They have provided a top notch virtualization solution and one might argue pioneered the virtualization space altogether. As such, many companies utilize this technology and all the features that come with it, so Morpheus covers a broad feature set in Vcenter.</p>
</div>
<div class="paragraph">
<p><strong>Features:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Virtual Machine Provisioning</p>
</li>
<li>
<p>Backups / Snapshots</p>
</li>
<li>
<p>Resource Groups</p>
</li>
<li>
<p>Datastores and DRS Clusters</p>
</li>
<li>
<p>Distributed Switches</p>
</li>
<li>
<p>Datacenter / Cluster scoping</p>
</li>
<li>
<p>Brownfield VM management and migration</p>
</li>
<li>
<p>VMware to VMware migrations</p>
</li>
<li>
<p>VMDK/OVF image conversion support</p>
</li>
<li>
<p>Hypervisor Remote Console</p>
</li>
<li>
<p>Periodic Synchronization</p>
</li>
<li>
<p>Veeam Backup Integration</p>
</li>
<li>
<p>Lifecycle Management and Resize</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On top of all these features, Morpheus also adds additional features to VMware that do not exist out of the box to make it easier to manage in multitenant environments as well as hybrid cloud environments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cloud-Init Support</p>
</li>
<li>
<p>VHD to VMDK Image Conversion</p>
</li>
<li>
<p>QCOW2 to VMDK Image Conversion</p>
</li>
<li>
<p>Multitenancy resource allocation</p>
</li>
<li>
<p>Virtual Image management (Templates)</p>
</li>
<li>
<p>Auto-scaling and recovery</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="getting-started-3">Getting Started</h3>
<div class="paragraph">
<p>To get started with vmware, simply start by adding a Cloud in the <code>Infrastructure &#8594; Clouds</code> section.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/vmware/add_cloud.png" alt="Add VMware Cloud form">
</div>
<div class="title">Figure 1: Add VMware Cloud form</div>
</div>
<div class="paragraph">
<p>To start adding a VMware cloud there will be some things you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Vcenter API Url:</strong> Typically this is the url to the vcenter web client with a <code>/sdk</code> in the path</p>
</li>
<li>
<p><strong>Username/Password</strong>: A set of credentials with high level access to VMware (ensure the account has Datacenter level access)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once these fields are entered, some selections will start prepopulating. A cloud integration must be scoped to a specific data center and cluster. If the dropdowns do not populate, please  verify the api url and provided credentials have access to Vcenter.</p>
</div>
<div class="paragraph">
<p>Another cool feature provided with the cloud integration is optional <code>Resource Pool</code> scoping. One can choose to allow the cloud to provision into All Resource Pools or a singular Resource Pool. When choosing <code>All</code>, these Resource Pools can be managed from a subaccount and visibility perspective via the Cloud Detail page (multitenancy).</p>
</div>
<div class="paragraph">
<p>The VMware cloud integration provides a few additional options including allowing users to make host selections or keeping that aspect hidden such that the best host is automatically chosen for the requested provision.</p>
</div>
<div class="paragraph">
<p>The <strong>RPC Mode</strong> feature can be configured to allow Morpheus to install its agent on the Guest operating system via either SSH/WinRM or Vmware Tools Guest Process feature. The VMware tools Guest Exection API can be tricky so it is recommended to use SSH/WinRM if possible. However, if it is not possible for the Appliance to have outbound access to all networks in which VMs are being provisioned to the SSH/WinRM ports (22, 5985 respectively) then Guest Execution is the only option.</p>
</div>
<div class="paragraph">
<p>The <code>Use VNC</code> console option on the vmware cloud requires special configuration on each ESXI host but allowed hypervisor level remote console support. (See the Advanced Section for details)</p>
</div>
<div class="paragraph">
<p>When following this add cloud wizard an option will be presented to create a group or add to an existing group. These groups can be given provisioning permission via  role based access control. It is normally recommended that groups are organized such that one cloud exists in one group unless the networks are setup such that internal routing is possible between the clouds. This is very useful for bursting, or hybrid cloud configurations.</p>
</div>
<div class="sect3">
<h4 id="existing-instances">Existing Instances</h4>
<div class="paragraph">
<p>Morpheus provides several features regarding pulling in existing virtual machines and servers in an environment. Most cloud options contain a checkbox titled '<strong>Inventory Existing Instances</strong>'. When this option is selected, all VMs found within the specified scope of the cloud integration will be scanned periodically and Virtual Machines will be synced into Morpheus. By default these virtual machines are considered 'unmanaged' and do not appear in the <code>Provisioning &#8594; Instances</code> area but rather <code>Infrastructure &#8594; Hosts &#8594; Virtual Machines</code>. However, a few features are provided with regards to unmanaged instances. They can be assigned to various accounts if using a multitenant master account, however it may be best suited to instead assign the 'Resource Pool' to an account and optionally move all servers with regards to that pool (more on this later).
A server can also be made into a managed server. During this process remote access is requested and an agent install is performed on the guest operating system. This allows for guest operations regarding log acquisition and stats. If the agent install fails, a server will still be marked as managed and an Instance will be created in <code>Provisioning</code>, however certain features will not function. This includes stats collection and logs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All Cloud data is resynchronized on a 5 minute interval. This includes Datastores, Resource Pools, Networks, Templates, and Virtual Machines.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="service-plans">Service Plans</h4>
<div class="paragraph">
<p>A default set of Service Plans are created in Morpheus for the VMware provisioning engine. These Service Plans can be considered akin to AWS Flavors or Openstack Flavors. They provide a means to set predefined tiers on memory, storage, cores, and cpu. Price tables can also be applied to these so estimated cost per virtual machine can be tracked as well as pricing for customers. By default, these options are fixed sizes but can be configured for dynamic sizing. A service plan can be configured to allow a custom user entry for memory, storage, or cpu. To configure this, simply edit an existing Service Plan tied to VMware or create a new one. These all can be easily managed from the <code>Admin &#8594; Plans &amp; Pricing</code> section.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/vmware/service_plans.png" alt="Plans &amp; Pricing management screen for VMware provider type">
</div>
<div class="title">Figure 3: Plans &amp; Pricing management screen for VMware provider type</div>
</div>
</div>
<div class="sect3">
<h4 id="virtual-images-templates">Virtual Images / Templates</h4>
<div class="paragraph">
<p>Morpheus will automatically take an inventory of all templates configured in Vcenter and present them as options during provisioning. However, in order for Morpheus to properly provision these virtual machines and provide accurate stats and health of these virtual machines, an agent must be installed during virtual machine startup. This means remote access needs to be granted at the guest operating system level to Morpheus. To properly configure these virtual images, find the relevant images in <code>Provisioning &#8594; Virtual Images</code> and edit the entry. On this form, a few options are presented. The first is a check box asking whether or not cloud-init is enabled. If cloud-init is enabled, simply provide the default OS username configured (for Ubuntu the username is <code>ubuntu</code> and for CentOS the username is <code>centos</code>). For those looking to add cloud-init to existing templates Morpheus requires no special configuration and can use the default <code>cloud.cfg</code> settings.</p>
</div>
<div class="paragraph">
<p>A global cloud-init username/password can also be configured per account as well as a keypair via the <code>Admin&#8594;Provisioning</code> settings section. The great benefit of utilizing cloud-init is default templates do not need common credential sets thereby increasing provisioning security.</p>
</div>
<div class="paragraph">
<p>Windows systems do not typically support cloud-init. So simply turn this checkbox off and provide the <code>Administrator</code> credentials. It should be noted that these credentials are encrypted in the database. If using WinRM for the RPC Mode instead of Vmware tools, a Local or Domain Administrator account credential set can be provided instead.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Currently the Morpheus Agent supported Operatings Systems are (Ubuntu 14.04, CentOS 7, RHEL 7, and Windows 2008 +).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docker">Docker</h3>
<div class="paragraph">
<p>So far this document has covered how to add the VMware cloud integration and has enabled users the ability to provision virtual machine based instances via the <code>Add Instance</code> catalog in <code>Provisioning</code>. Another great feature provided by Morpheus out of the box is the ability to use Docker containers and even support multiple containers per Docker host. To do this a Docker Host must first be provisioned into VMware (multiple are needed when dealing with horizontal scaling scenarios).</p>
</div>
<div class="paragraph">
<p>To provision a Docker Host simply navigate to the Cloud detail page or <code>Infrastructure&#8594;Hosts</code> section. From there click the <code>+ Container Host</code> button to add a VMware Docker Host. This host will show up in the Hosts tab next to other ESXi servers that were inventoried by the VMware cloud integration. Morpheus views a Docker host just like any other Hypervisor with the caveat being that it is used for running containerized images instead of virtualized ones. Once a Docker Host is successfully provisioned a green checkmark will appear to the right of the host marking it as available for use. In the event of a failure click into the relevant host that failed and an error explaining the failure will be displayed in red at the top.</p>
</div>
<div class="paragraph">
<p>Some common error scenarios include network connectivity. For a Docker Host to function properly, it must be able to resolve the Morpheus appliance url which can be configured in <code>Admin &#8594; Settings</code>. If it is unable to resolve and negotiate with the appliance than the agent installation will fail and provisioning instructions will not be able to be issued to the host.</p>
</div>
</div>
<div class="sect2">
<h3 id="multitenancy">Multitenancy</h3>
<div class="paragraph">
<p>A very common scenario for Managed Service Providers is the need to provide access to VMware resources on a customer by customer basis. With VMware several administrative features have been added to ensure customer resources are properly scoped and isolated. For VMware it is possible to assign specific <code>Networks</code>, <code>Datastores</code>, and <code>Resource Pools</code> to customer accounts or even set the public visibility of certain resources, therefore allowing all sub accounts access to the resource.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/vmware/cloud_detail.png" alt="Cloud detail view for VMware">
</div>
<div class="title">Figure 3: Cloud detail view for VMware</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced">Advanced</h3>
<div class="paragraph">
<p>There are several advanced features provided within Morpheus that can leverage some cool aspects of vmware. One of these features is Remote Console support directly to the hypervisor. To enable this feature a few prerequisites must be met. First, the Morpheus appliance must have network access to the ESXi hosts within vcenter. Secondly, firewall settings need to be adjusted on each ESXi host. This can be done in vsphere under firewall configuration on the host. Simply check the <code>gdbserver</code> option, which will open up the necessary ports (starting at 5900 range).</p>
</div>
<div class="paragraph">
<p>Now that the ESXi hosts are ready to utilize remote console, simply edit the cloud in Morpheus via <code>Infrastructure &#8594; Clouds</code>. Check the option that says <code>Use VNC</code>. It is important to note that currently this functionality only works for newly provisioned vms provisioned directly via Morpheus. This should change soon however.</p>
</div>
<div class="paragraph">
<p>It is also possible to import vm snapshots for backup or conversion purposes from Vcenter and also an ESXi host. However, this does require that the ESXi host license has an enterprise level license as it will not allow the appliance to download a virtual image if it is not a paid vmware license.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="amazon">Amazon</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="azure">Azure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Azure is Microsoft&#8217;s public cloud offering. Offering a full range of services and features across the globe in various datacenters. It is the equivalent of AWS for Microsoft running primarily on the Hyper-V based hypervisor. While it is a great public cloud offering, it can be somewhat difficult to get integrated with which is what this guide aims to cover.</p>
</div>
<div class="paragraph">
<p><strong>Features:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Virtual Machine Provisioning</p>
</li>
<li>
<p>Backups / Snapshots</p>
</li>
<li>
<p>Resource Groups</p>
</li>
<li>
<p>Networks</p>
</li>
<li>
<p>Marketplace Search and Provisioning</p>
</li>
<li>
<p>Migrations</p>
</li>
<li>
<p>Remote Console</p>
</li>
<li>
<p>Periodic Synchronization</p>
</li>
<li>
<p>Lifecycle Management and Resize</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Combine this with on premise solutions like Azure-Stack and Morpheus can provide a single pane of glass and self service portal for managing instances scattered across both public Azure and private Azure Stack offerings.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Morpheus even supports integrating with CSP based accounts in Azure (typically used by managed service providers).
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="getting-started-4">Getting Started</h3>
<div class="paragraph">
<p>To get started a few prerequisites must first be met. Firstly, an Azure subscription is required and can be created by going to <a href="https://account.windowsazure.com/organization">https://account.windowsazure.com/organization</a>.</p>
</div>
<div class="paragraph">
<p>Once a subscription has been created we can now login to the management portal: <a href="https://manage.windowsazure.com">https://manage.windowsazure.com</a>. From here we need to add an app account to the active directory services of Azure.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Azure is still migrating services gradually from the old portal UI to the new portal UI, as a result some aspects of this process will require moving between the 2 types of portals.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/active_directory.png" alt="Azure Active Directory UI">
</div>
<div class="title">Figure 1: Azure Active Directory UI</div>
</div>
<div class="paragraph">
<p>Once an active directory service is setup, an application credential must be added in order for Morpheus to have access to Azure. To do this simply click into the Active Directory and create a new Application. Select Add an application my organization is developing.  The name can be whatever and the type should be Web Application and/or web API.  Come up with any sign-on url and app id url (they will not be used and can even be the same value). Finally, Navigate into the Configure section for the application. A screen similar to Figure 2 should be visible:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/application.png" alt="Azure Application Detail Page">
</div>
<div class="title">Figure 2: Azure Application Detail Page</div>
</div>
<div class="paragraph">
<p>There are two pieces of information needed from this page. The Client ID will be needed when adding a Cloud to Morpheus as well as a secret key which can be created in the keys section of the application detail page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/keys.png" alt="Azure Application Detail Key Management">
</div>
<div class="title">Figure 3: Azure Application Detail Key Management</div>
</div>
<div class="paragraph">
<p>The next piece of information needed is the Tenant ID to be used by Morpheus. This can be one of the more difficult pieces to acquire via the Azure UI. To do so navigate back to the 'Applications' list section under 'Active Directory' and simply click 'View Endpoints' on the bottom of the screen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/endpoints.png" alt=""Azure Active Directory View Endpoints">
</div>
<div class="title">Figure 4: Azure Active Directory View Endpoints</div>
</div>
<div class="paragraph">
<p>A dialog should appear containing several endpoint links. In these links your Tenant ID is listed as a GUID. Copy this as the Tenant ID for use when adding a cloud to Morpheus:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/endpoints_dialog.png" alt="Azure Active Directory View Endpoints Tenant ID">
</div>
<div class="title">Figure 5: Azure Active Directory Tenant ID</div>
</div>
<div class="paragraph">
<p>Almost everything necessary to setup Azure has been acquired, but the next step involves granting permission to the Morpheus application to access resources and subscriptions within Azure. Now it is time to login to the new Azure portal via <a href="https://portal.azure.com">https://portal.azure.com</a>. Once logged in simply navigate to the subscriptions area of the portal.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The Subscription ID will be necessary when adding a cloud into Morpheus, so it is important to write this id down.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the subscription is selected, go into its 'Settings' and navigate to the 'Users' section in the right hand navigation. This is where things get a bit confusing in the azure portal. We need to add a new Owner to the account but instead of adding a User we are actually going to be adding the application we created in active directory earlier.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/add_owner.png" alt="Azure Add Owner to Subscription">
</div>
<div class="title">Figure 6: Azure Add Owner to Subscription</div>
</div>
<div class="paragraph">
<p>Once add owner has been selected, a list of users in active directory can be seen along with a search field at the top. What is a bit confusing is the app that was created is also a user but does not show in the default list. It will only show up once it is searched for by name.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/add_app.png" alt="Azure Add Application User">
</div>
<div class="title">Figure 7: Azure Add Application User</div>
</div>
<div class="paragraph">
<p>Now Morpheus will have permission to access resources and APIs to utilize Azure properly. All that is needed is to simply fill out the add cloud form in Morpheus. However, there are a few remaining prerequisites when it comes to setting up Azure. It is necessary for there to be both a Resource Group in the Azure Portal, A Network Security Group, A Virtual Network, and a Storage Account. The Storage Account should be configured as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/storage_account.png" alt="Azure Add Storage Account Configuration">
</div>
<div class="title">Figure 8: Azure Add Storage Account Configuration</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Remember, Morpheus needs to be able to remotely access provisioned vms via both SSH (Linux) and WinRM(Windows) in order to install the agent for stats collection and container orchestration (optionally). Make sure the network security group is configured correctly or an Azure Express Connect is properly configured. Remote Console can also utilize port 3389 for RDP based vms.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To finally add the Azure integration into Morpheus navigate to <code>Infrastructure &#8594; Clouds</code> and add an <code>Azure</code> cloud. Fill in the form with all the information that was previously acquired throughout the getting started section of the user guide.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/azure/add_cloud.png" alt="Azure Add Cloud">
</div>
<div class="title">Figure 9: Azure Add Cloud</div>
</div>
</div>
<div class="sect2">
<h3 id="docker-2">Docker</h3>
<div class="paragraph">
<p>So far this document has covered how to add the Azure cloud integration and has enabled users the ability to provision virtual machine based instances via the <code>Add Instance</code> catalog in <code>Provisioning</code>. Another great feature provided by Morpheus out of the box is the ability to use Docker containers and even support multiple containers per Docker host. To do this a Docker Host must first be provisioned into Azure (multiple are needed when dealing with horizontal scaling scenarios).</p>
</div>
<div class="paragraph">
<p>To provision a Docker Host simply navigate to the Cloud detail page or <code>Infrastructure&#8594;Hosts</code> section. From there click the <code>+ Container Host</code> button to add a Azure Docker Host. This host will show up in the Hosts tab. Morpheus views a Docker host just like any other Hypervisor with the caveat being that it is used for running containerized images instead of virtualized ones. Once a Docker Host is successfully provisioned a green checkmark will appear to the right of the host marking it as available for use. In the event of a failure click into the relevant host that failed and an error explaining the failure will be displayed in red at the top.</p>
</div>
<div class="paragraph">
<p>Some common error scenarios include network connectivity. For a Docker Host to function properly, it must be able to resolve the Morpheus appliance url which can be configured in <code>Admin &#8594; Settings</code>. If it is unable to resolve and negotiate with the appliance than the agent installation will fail and provisioning instructions will not be able to be issued to the host.</p>
</div>
</div>
<div class="sect2">
<h3 id="multitenancy-2">Multitenancy</h3>
<div class="paragraph">
<p>A very common scenario for Managed Service Providers is the need to provide access to Azure resources on a customer by customer basis. With Azure several administrative features have been added to ensure customer resources are properly scoped and isolated. For Azure it is possible to assign specific <code>Networks</code>, and <code>Resource Groups</code> to customer accounts or even set the public visibility of certain resources, therefore allowing all sub accounts access to the resource.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="google">Google</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="openstack">Openstack</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Openstack is becoming a widely used on-premise infrastructure orchestration platform. It has a wide array of contributors and enterprise sponsorships. There are several variations on openstack as well ranging from HP&#8217;s Helion Cloud to Cisco&#8217;s Metapod / Metacloud offering. Morpheus supports integration with all the various platform offerings and ranges in support all the way back to Openstack Icehouse. It leverages the APIs and provides full functionality as a self service portal in front of Openstack.</p>
</div>
<div class="paragraph">
<p><strong>Features:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Virtual Machine Provisioning</p>
</li>
<li>
<p>Backups / Snapshots</p>
</li>
<li>
<p>Security Group Management</p>
</li>
<li>
<p>Disk Mode support Local/Image (via Ceph)</p>
</li>
<li>
<p>Floating IP Assignment support</p>
</li>
<li>
<p>Brownfield VM management and migration</p>
</li>
<li>
<p>Lifecycle Management and Resize</p>
</li>
<li>
<p>Docker Host management / configuration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On top of all these features, Morpheus also adds additional features to Openstack that do not exist out of the box to make it easier to manage in multitenant environments as well as hybrid cloud environments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Image to QCOW2 Image Conversion</p>
</li>
<li>
<p>QCOW2 to RAW Image Conversion</p>
</li>
<li>
<p>Multitenancy resource allocation</p>
</li>
<li>
<p>Virtual Image management (Templates)</p>
</li>
<li>
<p>Auto-scaling and recovery</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="getting-started-5">Getting Started</h3>
<div class="paragraph">
<p>Adding an Openstack cloud to Morpheus is one of the simpler cloud integrations to get started with. First go to the <code>Infrastructure &#8594; Clouds</code> section and click add cloud. From here there are several options including Metapod, Helion, and general Openstack. Any of these options will actually work and for the most part the branded Openstack options are represented to make it clearer to the user as to the capabilities of Morpheus.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/openstack/add_cloud.png" alt="Add Openstack Cloud form">
</div>
<div class="title">Figure 1: Add Openstack Cloud form</div>
</div>
<div class="paragraph">
<p>Most of the information in the dialog can be acquired from the openstack dashboard. under <code>Project &#8594; Access &amp; Security &#8594; API Access</code>. The API Url that is needed is the one tied to <code>Identity</code>. The Domain and Project inputs typically correlate to the multitenant domain setup within openstack (sometimes just left at default) as well as the project name given to instances. Morpheus allows multiple integrations to the same openstack cluster scopable to domains and projects as needed. The remaining options help Morpheus determine what api capabilities exist in the selected openstack environment. Hence the need for the Openstack version and image format. If a newer openstack cluster is being used then exists in the dropdown, simply select the most recent version in the dropdown and this should function sufficiently until the new version is added.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Some Openstack environments do not support QCOW2 and force RAW image formats (like metapod). This is due to some network overhead in Ceph created by using QCOW2. Morpheus keeps 2 copies of openstack image templates for this exact purpose.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Saving this cloud integration should perform a verification step and close upon successful completion.</p>
</div>
<div class="sect3">
<h4 id="existing-instances-2">Existing Instances</h4>
<div class="paragraph">
<p>Morpheus provides several features regarding pulling in existing virtual machines and servers in an environment. Most cloud options contain a checkbox titled '<strong>Inventory Existing Instances</strong>'. When this option is selected, all VMs found within the specified scope of the cloud integration will be scanned periodically and Virtual Machines will be synced into Morpheus. By default these virtual machines are considered 'unmanaged' and do not appear in the <code>Provisioning &#8594; Instances</code> area but rather <code>Infrastructure &#8594; Hosts &#8594; Virtual Machines</code>. However, a few features are provided with regards to unmanaged instances. They can be assigned to various accounts if using a multitenant master account, however it may be best suited to instead assign the 'Resource Pool' to an account and optionally move all servers with regards to that pool (more on this later).
A server can also be made into a managed server. During this process remote access is requested and an agent install is performed on the guest operating system. This allows for guest operations regarding log acquisition and stats. If the agent install fails, a server will still be marked as managed and an Instance will be created in <code>Provisioning</code>, however certain features will not function. This includes stats collection and logs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All Cloud data is resynchronized on a 5 minute interval. This includes Datastores, Resource Pools, Networks, Templates, and Virtual Machines.
=== Docker
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So far this document has covered how to add the Openstack cloud integration and has enabled users the ability to provision virtual machine based instances via the <code>Add Instance</code> catalog in <code>Provisioning</code>. Another great feature provided by Morpheus out of the box is the ability to use Docker containers and even support multiple containers per Docker host. To do this a Docker Host must first be provisioned into Openstack (multiple are needed when dealing with horizontal scaling scenarios).</p>
</div>
<div class="paragraph">
<p>To provision a Docker Host simply navigate to the Cloud detail page or <code>Infrastructure&#8594;Hosts</code> section. From there click the <code>+ Container Host</code> button to add a Openstack Docker Host. This host will show up in the Hosts tab. Morpheus views a Docker host just like any other Hypervisor with the caveat being that it is used for running containerized images instead of virtualized ones. Once a Docker Host is successfully provisioned a green checkmark will appear to the right of the host marking it as available for use. In the event of a failure click into the relevant host that failed and an error explaining the failure will be displayed in red at the top.</p>
</div>
<div class="paragraph">
<p>Some common error scenarios include network connectivity. For a Docker Host to function properly, it must be able to resolve the Morpheus appliance url which can be configured in <code>Admin &#8594; Settings</code>. If it is unable to resolve and negotiate with the appliance than the agent installation will fail and provisioning instructions will not be able to be issued to the host.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced-2">Advanced</h3>
<div class="paragraph">
<p>There are a few advanced features when it comes to provisioning on top of Openstack. Most of these present themselves in the provisioning wizard. They include OS Volume Type (Local or Volume). This basically dicates wether the main OS disk is copied and run off the hypervisor or remotely mounted as a volume via Glacier. Some openstack setups only configure hypervisors with minimal local disks so Volume type is needed.</p>
</div>
<div class="paragraph">
<p>Another option during provisioning is "Assign Floating IP". This option does exactly what it says and is similar to the feature on the Openstack instances dashboard itself. It should be noted that this will attempt to acquire a floating IP from the project and if out of capacity will attempt to increase capacity to the project if the cloud credentials provided have sufficient administrative privileges to do so.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="softlayer">Softlayer</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="digitalocean">Digital Ocean</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="virtualbox">Virtualbox</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="xen">Xen Server</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="nutanix">Nutanix</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="vcloudair">Vcloud Air</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="hyperv">Hyper-V</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="docker">Docker</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="pxe">PXE Booting</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-08-15 09:01:35 -04:00
</div>
</div>
</body>
</html>
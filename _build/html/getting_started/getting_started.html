

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; jwtest 1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="jwtest 1 documentation" href="../index.html"/>
        <link rel="next" title="Provisioning" href="../provisioning/provisioning.html"/>
        <link rel="prev" title="Morpheus Guide" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#base-requirements">Base Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storage">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-connectivity">Network Connectivity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#components">Components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ubuntu">Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#centos">CentOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rhel">RHEL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-options">Additional Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#system-defaults">System Defaults</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ssl-certificates">SSL Certificates</a></li>
<li class="toctree-l4"><a class="reference internal" href="#additional-configuration-options">Additional Configuration Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-configuration">Advanced Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#proxies">Proxies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-proxies">Defining Proxies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cloud-communication">Cloud Communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provisioning-with-proxies">Provisioning with Proxies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker">Docker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#high-availability-mode">High Availability Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#database-tier">Database Tier</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-queue-tier">Message Queue Tier</a></li>
<li class="toctree-l4"><a class="reference internal" href="#search-index-tier">Search Index Tier</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-secrets">Application Secrets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">SSL Certificates</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#upgrading">Upgrading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#debian-ubuntu">Debian / Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#centos-rhel">CentOS / RHEL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#initial-appliance-setup">Initial Appliance Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#appliance-setup">Appliance Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-license-key">Add a License Key</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning/provisioning.html">Provisioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration/administration.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring/monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logs/logging.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../backups/backups.html">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration_guides/integration_guides.html">Integration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faqs.html">FAQ’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/release_notes.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">jwtest</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/getting_started/getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>|morpheus| is a software based appliance installation capable of
orchestrating many clouds and hypervisors. Before an installation is
started it is important to understand some of the base requirements.</p>
<p>In the simplest configuration |morpheus| simply needs one Appliance
Server. The Appliance Server, by default, contains all the components
necessary to orchestrate both vm’s and containers. To get started some
base requirements are recommended:</p>
<div class="section" id="base-requirements">
<h3>Base Requirements<a class="headerlink" href="#base-requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Operating System:</strong> Ubuntu 14.04 / 16.04 or
CentOS/RHEL greater than 7.0.</li>
<li><strong>Memory:</strong> 8 GB minimum</li>
<li><strong>Storage:</strong> 100 GB storage minimum</li>
<li>Network connectivity from your users to the appliance over TCP 443
(HTTPS)</li>
<li>Inbound connectivity access from provisioned vm’s and container hosts
on ports 443 and 80 (needed for agent communication)</li>
<li>Internet Connectivity from Appliance (To download from |morpheus| ’
public docker repositories and virtual image catalog)</li>
<li>Superuser privileges via the sudo command for the user installing the
|morpheus| Appliance package.</li>
<li>An Appliance URL that is accessible to all managed hosts. It is
necessary for all hosts that are managed by |morpheus| to be able to
communicate with the appliance server ip on port 443. This URL is
configured under Admin-&gt;Settings. |morpheus| also utilizes SSH (Port
22) and Windows Remote Management (Port 5985) to initialize a server.</li>
<li>An Appliance License is required for any operations involving
provisioning.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ubuntu 16.10 and Amazon Linux are not supported.</p>
</div>
</div>
<div class="section" id="storage">
<h3>Storage<a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h3>
<p>|morpheus| needs storage space for a few items. One is for the built-in
<a class="reference external" href="https://www.elastic.co/products/elasticsearch[Elasticsearch">https://www.elastic.co/products/elasticsearch[Elasticsearch</a>] store (used
for log aggregation and stats collection metrics). |morpheus| also keeps
a workspace and local virtual image cache for doing virtual image
conversion and template upload. While the permanent store of these can
be offloaded via a Storage Provider some space is still recommended for
dealing with non streamable virtual image formats.</p>
<p>In many common scenarios it might be prudent to configure a shared
datastore on a storage cluster and mounted to <code class="docutils literal"><span class="pre">/var/opt/morpheus</span></code>
(this is where all user based data and database data is persisted).
There are several folders located within here that can be independently
located as desired.</p>
</div>
<div class="section" id="network-connectivity">
<h3>Network Connectivity<a class="headerlink" href="#network-connectivity" title="Permalink to this headline">¶</a></h3>
<p>|morpheus| primarily operates via communication with its agent that is
installed on all managed vm’s or docker hosts. This is a lightweight
agent responsible for aggregating logs and stats and sending them back
to the client with minimal network traffic overhead. It also is capable
of processing instructions related to provisioning and deployments
instigated by the appliance server.</p>
<p>The |morpheus| Agent exists for both linux and windows based platforms
and opens NO ports on the guest operating system. Instead it makes an
outbound SSL (https / wss) connection to the appliance server. This is
what is known as the <code class="docutils literal"><span class="pre">appliance</span> <span class="pre">url</span></code> during configuration (in
Admin-&gt;Settings). When the agent is started it automatically makes this
connection and securely authenticates. Therefore, it is necessary for
all vm’s and docker based hosts that are managed by morpheus to be able
to reach the appliance server ip on port 443.</p>
<p>|morpheus| also utilizes SSH (Port 22) and Windows Remote Management
(Port 5985) to initialize a server. This includes sending remote command
instructions to install the agent. It is actually possible for
|morpheus| to operate without agent connectivity (though stats and logs
will not function) and utilize SSH/WinRM to perform operations. Once the
agent is installed and connections are established SSH/WinRM
communication will stop. This is why an outbound requirement exists for
the appliance server to be able to utilize port 22 and 5985.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In newer versions of morpheus this outbound connectivity is not mandatory. The agent can be installed by hand or via Guest Process API’s on cloud integrations like VMware.</p>
</div>
</div>
<div class="section" id="components">
<h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>The Appliance Server automatically installs several components for the
operation of |morpheus| . This includes:</p>
<ul class="simple">
<li>RabbitMQ (Messaging)</li>
<li>MySQL (Logistical Data store)</li>
<li>Elasticsearch (Logs / Metrics store)</li>
<li>Redis (Cache store)</li>
<li>Tomcat (|morpheus| Application)</li>
<li>Nginx (Web frontend)</li>
<li>Guacamole (Remote console service for clientless remote console)</li>
<li>Check Server (Monitoring Agent for custom checks added via UI)</li>
</ul>
<p>All of these are installed in an isolated way using chef zero to
<code class="docutils literal"><span class="pre">/opt/morpheus</span></code>. It is also important to note these services can be
offloaded to separate servers or clusters as desired. For details check
the installation section and high availability.</p>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>|morpheus| comes packaged as a <code class="docutils literal"><span class="pre">debian</span></code> or <code class="docutils literal"><span class="pre">yum</span></code> based package. It
can be installed on a single on/off premise linux based host or
configured for high availability and horizontal scaling. |morpheus| is
currently only supported on Ubuntu 14.04, Ubuntu 16.04 , CentOS 7.0 or
newer, and RHEL 7.0 or newer based hosts (Ubuntu is recommended).</p>
<div class="section" id="ubuntu">
<h3>Ubuntu<a class="headerlink" href="#ubuntu" title="Permalink to this headline">¶</a></h3>
<p>To get started installing |morpheus| on Ubuntu (14.04 currently) a few prepratory items should be addressed first.</p>
<p>First make sure the apt repository is up to date by running <cite>sudo apt-get update</cite>. It might also be advisable to verify that the assigned hostname of the machine is self resolvable.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If the machine is unable to resolve its own hostname (<cite>nslookup hostname</cite>) some installation commands will be unable to verify service health during installation and fail.</p>
</div>
<p>Next simply download the relevant <cite>.deb</cite> package for installation. This package can be acquired from your account rep or via a free trial request from <a class="reference external" href="https://www.morpheusdata.com[morheusdata.com">https://www.morpheusdata.com[morheusdata.com</a>].</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Use the <cite>wget</cite> command to directly download the package to your appliance server. i.e. <cite>wget https://downloads.gomorpheus.com/path/to/package.deb</cite></p>
</div>
<p>Next we must install the package onto the machine and configure the morpheus services:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo dpkg -i morpheus-appliance_x.x.x-1.amd64.deb
sudo morpheus-ctl reconfigure
</pre></div>
</div>
<p>Once the installation is complete the web interface will automatically start up. By default it will be resolvable at <cite>https://your_machine_name</cite> and in many cases this may not be resolvable from your browser. The url can be changed by editing <cite>/etc/morpheus/morpheus.rb</cite> and changing the value of <cite>appliance_url</cite>. After this has been changed simply run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo morpheus-ctl reconfigure
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl start morpheus-ui
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <cite>morpheus-ui</cite> can take 2-3 minutes to startup before it becomes available.</p>
</div>
<p>There are additional post install settings that can be viewed in the Advanced section of the guide.</p>
<p>Once the browser is pointed to the appliance a first time setup wizard will be presented. Please follow the on screen instructions by creating the master account. From there you will be presented with the license settings page where a license can be applied for use (if a license is required you may request one or purchase one by contacting your sales representative).</p>
<p>More details on setting up infrastructure can be found throughout this guide.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If any issues occur it may be prudent to check the morpheus log for details at <cite>/var/log/morpheus/morpheus-ui/current</cite>.</p>
</div>
</div>
<div class="section" id="centos">
<h3>CentOS<a class="headerlink" href="#centos" title="Permalink to this headline">¶</a></h3>
<p>To get started installing |morpheus| on CentOS/RHEL a few preparatory items should be addressed first.</p>
<ol class="arabic simple">
<li>Configure firewalld to allow access from users on port 80 or 443 (Or remove it if not required).</li>
<li>Make sure the machine is self resolvable to its own hostname.</li>
</ol>
<p>For RHEL: In order for the guacamole service (remote console) to properly install some additional optional repositories first need added.</p>
<ul class="simple">
<li><strong>RHEL 7.x Amazon:</strong>
<code class="docutils literal"><span class="pre">yum-config-manager</span> <span class="pre">--enable</span> <span class="pre">rhui-REGION-rhel-server-optional</span></code></li>
<li><strong>RHEL 7.x:</strong>
<code class="docutils literal"><span class="pre">yum-config-manager</span> <span class="pre">--enable</span> <span class="pre">rhel-7-server-optional-rpms</span></code></li>
</ul>
<p>For Amazon users a redhat subscription is not required if the appropriate yum REGION repository is added instead as demonstrated above.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If the machine is unable to resolve its own hostname (<code class="docutils literal"><span class="pre">nslookup</span> <span class="pre">hostname</span></code>) some installation commands will be unable to verify service health during installation and fail.</p>
</div>
<p>#. Next simply download the relevant <code class="docutils literal"><span class="pre">.rpm</span></code> package for installation. This package can be acquired from your account rep or via a free trial
request from <a class="reference external" href="https://www.morpheushub.com">https://www.morpheushub.com</a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Use the <code class="docutils literal"><span class="pre">wget</span></code> command to directly download the package to your</p>
</div>
<p>appliance server. i.e. <code class="docutils literal"><span class="pre">wget</span> <span class="pre">https://downloads.gomorpheus.com/path/to/package.rpm</span></code></p>
<ol class="arabic simple">
<li>Next we must install the package onto the machine and configure the morpheus services:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo sudo rpm -i morpheus-appliance-x.x.x-1.x86<span class="se">\_</span><span class="m">64</span>.rpm
sudo morpheus-ctl reconfigure
</pre></div>
</div>
<ol class="arabic simple">
<li>Once the installation is complete the web interface will automatically start up. By default it will be resolvable at <code class="docutils literal"><span class="pre">https://your_machine_name</span></code> and in many cases this may not be resolvable from your browser. The url can be changed by editing <code class="docutils literal"><span class="pre">/etc/morpheus/morpheus.rb</span></code> and changing the value of <code class="docutils literal"><span class="pre">appliance_url</span></code>. After this has been changed simply run :</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo morpheus-ctl reconfigure
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl start morpheus-ui
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">morpheus-ui</span></code> can take 2-3 minutes to startup before it becomes available.</p>
</div>
<p>There are additional post install settings that can be viewed in the Advanced section of the guide.</p>
<p>Once the browser is pointed to the appliance a first time setup wizard will be presented. Please follow the on screen instructions by creating the master account. From there you will be presented with the license settings page where a license can be applied for use (if a license is required you may request one or purchase one by contacting your sales representative).</p>
<p>More details on setting up infrastructure can be found throughout this guide.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If any issues occur it may be prudent to check the morpheus log for details at <code class="docutils literal"><span class="pre">/var/log/morpheus/morpheus-ui/current</span></code>.</p>
</div>
</div>
<div class="section" id="rhel">
<h3>RHEL<a class="headerlink" href="#rhel" title="Permalink to this headline">¶</a></h3>
<p>To get started installing |morpheus| on RHEL 7 a few prerequisite items
are required.</p>
<p>The RedHat Enterprise Linux 7 server needs to be registered and
activated with Redhat subscription. The server optional rpms repo needs
to be enabled as well.</p>
<p>To check if the server has been actived please run the
subscription-manager version. Subscription manager will return the
version plus the python depency version.</p>
<p>If the server has not been registered and activated then the
subscription manager version will return the below message.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@appliance ~<span class="o">]</span><span class="c1"># subscription-manager version server type: This system is currently not registered subscription management server: 0.9.51.24.-1 subscription-manager: 1.10.14-7.el7 python-rhsm:</span>
<span class="m">1</span>.10.12-2.el7 ----
</pre></div>
</div>
<p>When a server has been registered and activated with Redhat the
subscription manager will return the below message.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@appliance ~<span class="o">]</span><span class="c1"># subscription-manager version server type: Red Hat Subscription Management subscription management server: 0.9.51.24-1</span>
subscription-manager: <span class="m">1</span>.10.14-7.el7 python-rhsm: <span class="m">1</span>.10.12-2.el7
</pre></div>
</div>
<p>If the subscription manager re-turns the message “This system is
currently not registered” please follow the below steps to register the
server.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To register the server you will need to have sudo permissions</p>
</div>
<p>[Member of the Wheel group] or root access to the server. You will also
need your redhat registered email address and password.</p>
<p>subscription-manager register</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@appliance ~<span class="o">]</span><span class="c1"># subscription-manager register Username: redhat@example.com Password:</span>
</pre></div>
</div>
<p>. subscription-manager auto –attach [Note this can take a minute to
complete.] + .. code-block:: bash —- sudo subscription-manager attach –auto</p>
<p>Installed Product Current Status: Product Name: Red Hat Enterprise Linux
Server Status: Subscribed —-</p>
<p>To check to see if the RHEL server has the Red Hat Enterprise Linux 7
Server - Optional (RPMs) repo enabled please run the following command
to return the repo status.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To check the server repos you will need to have sudo permissions</p>
</div>
<p>[Member of the Wheel group] or root access to the server.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo yum repolist all <span class="se">\|</span> grep <span class="s2">&quot;rhel-7-server-optional-rpms&quot;</span> rhel-7-server-optional-rpms/7Server/x86<span class="se">\_</span><span class="m">64</span> disabled
</pre></div>
</div>
<p>If the repo status was returned as disabled then you will need to enable
the repo using the subsciption manager like below.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo subscription-manager repos --enable rhel-7-server-optional-rpms
Repo <span class="s1">&#39;rhel-7-server-optional-rpms&#39;</span> is enabled <span class="k">for</span> this system.
</pre></div>
</div>
<p>The message “Repo ‘rhel-7-server-optional-rpms’ is enabled for this
system.” will appear after enabling the repo. This will confirm that the
repo has been enabled.</p>
<p>Next simply download the relevant <code class="docutils literal"><span class="pre">.rpm</span></code> package for installation.
This package can be acquired from your account rep or via a free trial
request from <a class="reference external" href="https://www.morpheusdata.com[morheusdata.com">https://www.morpheusdata.com[morheusdata.com</a>].</p>
<p>TIP: Use the <code class="docutils literal"><span class="pre">wget</span></code> command to directly download the package to your
appliance server. i.e.
<code class="docutils literal"><span class="pre">wget</span> <span class="pre">https://downloads.gomorpheus.com/path/to/package.rpm</span></code></p>
<p>Next we must install the package onto the machine and configure the
morpheus services:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo rpm -i morpheus-appliance<span class="se">\_</span>x.x.x-1.amd64.rpm
sudo morpheus-ctl reconfigure
</pre></div>
</div>
<p>Once the installation is complete the web interface will automatically
start up. By default it will be resolvable at <code class="docutils literal"><span class="pre">https://your_machine_name</span></code> and in many cases this may not be
resolvable from your browser. The url can be changed by editing <code class="docutils literal"><span class="pre">/etc/morpheus/morpheus.rb</span></code> and changing the value of
<code class="docutils literal"><span class="pre">appliance_url</span></code>. After this has been changed simply run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo morpheus-ctl reconfigure
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl start morpheus-ui
</pre></div>
</div>
<p>NOTE: The <code class="docutils literal"><span class="pre">morpheus-ui</span></code> can take 2-3 minutes to startup before it
becomes available.</p>
<p>There are additional post install settings that can be viewed in the
Advanced section of the guide.</p>
<p>Once the browser is pointed to the appliance a first time setup wizard
will be presented. Please follow the on screen instructions by creating
the master account. From there you will be presented with the license
settings page where a license can be applied for use (if a license is
required you may request one or purchase one by contacting your sales
representative).</p>
<p>More details on setting up infrastructure can be found throughout this
guide.</p>
<p>TIP: If any issues occur it may be prudent to check the morpheus log for
details at <code class="docutils literal"><span class="pre">/var/log/morpheus/morpheus-ui/current</span></code>.</p>
</div>
<div class="section" id="additional-options">
<h3>Additional Options<a class="headerlink" href="#additional-options" title="Permalink to this headline">¶</a></h3>
<p>There are several additional configuration options during installation that may be performed. For example, |morpheus| provides convenient options for uploading your own SSL certificates as well as externalizing several dependent services.</p>
<div class="section" id="system-defaults">
<h4>System Defaults<a class="headerlink" href="#system-defaults" title="Permalink to this headline">¶</a></h4>
<p>|morpheus| follows several install location conventions. Below is a list of system defaults for convenient management:</p>
<p>Installation Location: <code class="docutils literal"><span class="pre">/opt/morpheus</span></code></p>
<ul class="simple">
<li><em>Log Location:</em> <code class="docutils literal"><span class="pre">/var/log/morpheus</span></code> ** <em>|morpheus| -UI:</em>
<code class="docutils literal"><span class="pre">/var/log/morpheus/morpheus-ui</span></code> ** <em>MySQL:</em>
<code class="docutils literal"><span class="pre">/var/log/morpheus/mysql</span></code> ** <em>NginX:</em> <code class="docutils literal"><span class="pre">/var/log/morpheus/nginx</span></code>
** <em>Check Server:</em> <code class="docutils literal"><span class="pre">/var/log/morpheus/check-server</span></code> ** <em>Elastic
Search:</em> <code class="docutils literal"><span class="pre">/var/log/morpheus/elsticsearch</span></code> ** <em>RabbitMQ:</em>
<code class="docutils literal"><span class="pre">/var/log/morpheus/rabbitmq</span></code> ** <em>Redis:</em>
<code class="docutils literal"><span class="pre">/var/log/morpheus/redis</span></code></li>
<li><em>User-defined install/config:</em> <code class="docutils literal"><span class="pre">/etc/morpheus/morpheus.rb</span></code></li>
</ul>
</div>
<div class="section" id="ssl-certificates">
<h4>SSL Certificates<a class="headerlink" href="#ssl-certificates" title="Permalink to this headline">¶</a></h4>
<p>The default installation generates a self-signed SSL certificate. To
implement a third-party certificate:</p>
<ol class="arabic simple">
<li>Copy the private key and certificate to
<code class="docutils literal"><span class="pre">/etc/morpheus/ssl/your_fqdn_name.key</span></code> and
<code class="docutils literal"><span class="pre">/etc/morpheus/ssl/your_fqdn_name.crt</span></code> respectively.</li>
<li>Edit the configuration file <code class="docutils literal"><span class="pre">/etc/morpheus/morpheus.rb</span></code> and add the
following entries:</li>
</ol>
<p>NOTE: Both files should be owned by root and only readable by root, also if the server certificate is signed by an intermediate then you should include the signing chain inside the certificate file.</p>
<p>Next simply reconfigure the appliance and restart nginx:</p>
</div>
<div class="section" id="additional-configuration-options">
<h4>Additional Configuration Options<a class="headerlink" href="#additional-configuration-options" title="Permalink to this headline">¶</a></h4>
<p>There are several other options available to the
<code class="docutils literal"><span class="pre">/etc/morpheus/morpheus.rb</span></code> file that can be useful when setting up
external service integrations or high availability:</p>
<p>These settings allow one to externally configure and scale mysql, elasticsearch, redis, and rabbitmq which is critical for a high availability setup.</p>
</div>
</div>
</div>
<div class="section" id="advanced-configuration">
<h2>Advanced Configuration<a class="headerlink" href="#advanced-configuration" title="Permalink to this headline">¶</a></h2>
<p>|morpheus| provides several more advanced configuration capabilities when operating in tougher network environments.</p>
<div class="section" id="proxies">
<h3>Proxies<a class="headerlink" href="#proxies" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>In many situations , companies deploy virtual machines in proxy
restricted environments for things such as PCI Compliance, or just
general security. As a result of this |morpheus| provides out of the box
support for proxy connectivity. Proxy authentication support is also
provided with both Basic Authentication capabilities as well as NTLM for
Windows Proxy environments. |morpheus| is even able to configure virtual
machines it provisions to utilize these proxies by setting up the
operating systems proxy settings directly (restricted to cloud-init
based Linux platforms for now, but can also be done on windows based
platforms in a different manner).</p>
<p>To get started with Proxies, it may first be important to configure the
|morpheus| appliance itself to have access to proxy communication for
downloading service catalog images. To configure this, visit the Admin
-&gt; Settings page where a section labeled “Proxy Settings” is located.
Fill in the relevant connection info needed to utilize the proxy. It may
also be advised to ensure that the Linux environment’s <code class="docutils literal"><span class="pre">http_proxy</span></code>,
<code class="docutils literal"><span class="pre">https_proxy</span></code>, and <code class="docutils literal"><span class="pre">no_proxy</span></code> are set appropriately.</p>
</div>
<div class="section" id="defining-proxies">
<h4>Defining Proxies<a class="headerlink" href="#defining-proxies" title="Permalink to this headline">¶</a></h4>
<p>Proxies can be used in a few different contexts and optionally scoped to
specific networks with which one may be provisioning into or on a cloud
integration as a whole. To configure a Proxy for use by the provisioning
engines within |morpheus| we must go to
<code class="docutils literal"><span class="pre">Infrastructure</span> <span class="pre">-&gt;</span> <span class="pre">Networks</span> <span class="pre">-&gt;</span> <span class="pre">Proxies</span></code>. Here we can create records
representing connection information for various proxies. This includes
the host ip address, proxy port, and any credentials (if necessary)
needed to utilize the proxy. Now that these proxies are defined we can
use them in various contexts.</p>
</div>
<div class="section" id="cloud-communication">
<h4>Cloud Communication<a class="headerlink" href="#cloud-communication" title="Permalink to this headline">¶</a></h4>
<p>When morpheus needs to connect to various cloud APIs to issue
provisioning commands or to sync in existing environments, we need to
ensure that those api endpoints are accessible by the appliance. In some
cases the appliance may be behind a proxy when it comes to public cloud
access like Azure and AWS. To configure the cloud integration to utilize
a proxy, when adding or editing a cloud there is a setting called “API
Proxy” under “Advanced Options”. This is where the proxy of choice can
be selected to instruct the Provisioning engine how to communicate with
the public cloud. Simply adjust this setting and the cloud should start
being able to receive/issue instructions.</p>
</div>
<div class="section" id="provisioning-with-proxies">
<h4>Provisioning with Proxies<a class="headerlink" href="#provisioning-with-proxies" title="Permalink to this headline">¶</a></h4>
<p>Proxy configurations can vary from operating system to operating system
and in some cases it is necessary for these to be configured in the
templates as a prerequisite. In other cases it can also be configured
automatically. Mostly with the use of cloud-init (which all of our out
of the box service catalog utilizes on all clouds). When
editing/creating a cloud there is a setting for “Provisioning Proxy” in
“Provisioning Options”. If this proxy is set, |morpheus| will
automatically apply these proxy settings to the guest operating system.</p>
<p>Overriding proxy settings can also be done on the Network record.
Networks (or subnets) can be configured in
<code class="docutils literal"><span class="pre">Infrastructure</span> <span class="pre">-&gt;</span> <span class="pre">Networks</span></code> or on the Networks tab of the relevant
Cloud detail page. Here, a proxy can also be assigned as well as
additional options like the <code class="docutils literal"><span class="pre">No</span> <span class="pre">Proxy</span></code> rules for proxy exceptions.</p>
</div>
<div class="section" id="docker">
<h4>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h4>
<p>When provisioning Docker based hosts within a Proxy environment it is up
to the user to configure the docker hosts proxy configuration manually.
There are workflows that can be configured via the Automation engine to
make this automatic when creating docker based hosts. Please see
documentation on Docker and proxies for specific information.</p>
<p>Proxy setups can vary widely from company to company, and it may be
advised to contact support for help configuring morpheus to work in the
proxy environment.</p>
</div>
</div>
<div class="section" id="high-availability-mode">
<h3>High Availability Mode<a class="headerlink" href="#high-availability-mode" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>Overview<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>|morpheus| ships as a stand-alone appliance running as a virtual machine
in your own environment. This stand-alone appliance contains all the
software needed to run |morpheus| and uses a package to distribute the
binary files. A configuration utility is also provided to configure the
software based on your environment needs. As |morpheus| scales and
becomes a more critical component of your infrastructure the stand-alone
method does not meet the needs in terms of uptime availability and
scalability. We have designed the components that makeup |morpheus| 
distributable to enable you to deploy it in a multi-tier configuration.
This document discusses the possible deployment scenarios and use cases
for distributing |morpheus| and increasing its uptime availability.</p>
<p>Each tier described in the following architecture section can be scaled
out to increase its availability. To remove the single points of failure
from inside the stand-alone appliance you will need to stand up each of
the architecture components described in the architecture section.
System administration of these components are critical to the success of
a highly scaled system including logging and monitoring. The
infrastructure setup section goes over the details of setting up the
proper infrastructure to allow the application servers to talk to these
services directly rather than the internal services created by the
installer in a stand-alone configuration.</p>
</div>
<div class="section" id="architecture">
<h4>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h4>
<p>|morpheus| contains the following tiers in the stand-alone deployment
configuration: web, application, cache, message queue, search index, and
database. Each tier can be distributed and deployed on separate servers
except for the cache. Currently the cache is localized to each
application server and is scheduled for removal in a later release. In
addition, there is a shared storage tier which holds artifacts and
backup objects.</p>
<img alt="../_images/morpheusHA.png" src="../_images/morpheusHA.png" />
<dl class="docutils">
<dt>Web Tier</dt>
<dd>|morpheus| uses Nginx as a reverse proxy for its application tier. It
also serves access to the localized package repository used when
deploying data nodes and virtual machines providing the |morpheus| agent
and utility software.</dd>
<dt>Application Tier</dt>
<dd>|morpheus| application is written in Groovy and Grails. It can be run on
multiple servers behind a web connection load balancer that supports
websockets. The application itself runs in a Java virtual machine as an
Apache Tomcat container.</dd>
<dt>Cache Tier</dt>
<dd>Currently |morpheus| uses a caching layer for database requests, this
component is scheduled for removal in a future release. A local instance
of Redis is used as the cache and is not distributed. The packaged
installer will install a local Redis instance to use until the component
is removed from the application.</dd>
<dt>Message Queue Tier</dt>
<dd>|morpheus| uses message queueing to send messages to different
components of the application that enable various actions. RabbitMQ is
used as the message broker, only the application communicates with the
message queue broker. This component is scaled horizontally behind a
load balancer so that each application server can connect to the broker
using a single DNS name.</dd>
<dt>Search Index Tier</dt>
<dd>|morpheus| stores activity, backup results, logs, and statistics in an
index to enable searching using ElasticSearch. Scaling out ElasticSearch
is handled by ElasticSearch itself and does not require a load balancer.
Each application server’s configuration contains addresses for each
ElasticSearch.</dd>
<dt>Database Tier</dt>
<dd>|morpheus| use a SQL persistent database; in the stand-alone appliance,
it is MySQL. To scale out the database tier setup a SQL compliant
database. Each application instance will need write access to the
database. Configuring MySQL or Percona database engine in an
active/active cluster will allow write access to the |morpheus| database
from any application server.</dd>
<dt>Shared Storage</dt>
<dd>|morpheus| creates artifacts and objects when deploying applications or
running backups. These artifacts need to be written to a file system.
These objects need to be accessible by any application server they need
to exist on a shared storage device. |morpheus| allows you to create
storage providers such as a local directory, AWS S3, Swift, or cloud
CDNs.</dd>
<dt>Infrastructure Setup</dt>
<dd>Infrastructure required for the external services should be deployed in
a regional manner and should not cross WAN boundaries with high latency
links. You can setup the external services in any cloud provider,
on-premises internal cloud or data center, or virtual environment.
Scaling and performance metrics of the external services are based on
recommendations from each service’s owner or community.</dd>
</dl>
</div>
<div class="section" id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>|morpheus| configuration is controlled by a configuration file located
at /etc/morpheus/morpheus.rb. This file is read when you run
morpheus-ctl reconfigure after installing the appliance package. Each
section is tied to a deployment tier: database is mysql, message queue
is rabbitmq, serach index is elasticsearch. There are no entries for the
web and application tiers since those are part of the core application
server where the configuration file resides.</p>
<p>An example configuration file for a distributed |morpheus| deployment:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mysql<span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">false</span>
mysql<span class="o">[</span><span class="s1">&#39;host&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;52.53.240.28&#39;</span> <span class="o">=</span>&gt; <span class="m">10004</span>,  <span class="s1">&#39;52.53.241.94&#39;</span> <span class="o">=</span>&gt; <span class="m">10004</span><span class="o">}</span>
mysql<span class="o">[</span><span class="s1">&#39;morpheus\_db&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;morpheusdb01&#39;</span>
mysql<span class="o">[</span><span class="s1">&#39;morpheus\_db\_user&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;merovingian&#39;</span> mysql<span class="o">[</span><span class="s1">&#39;morpheus\_password&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;Wm5n5gXqXCe9v52&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">false</span> rabbitmq<span class="o">[</span><span class="s1">&#39;vhost&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;zion&#39;</span> rabbitmq<span class="o">[</span><span class="s1">&#39;queue\_user&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;dujour&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;queue\_user\_password&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;5tfg9n2iBifzW5c&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;host&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;rabbitmq-lb01.morpheusdata.com&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;port&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;10008&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;stomp\_port&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;10010&#39;</span>
rabbitmq<span class="o">[</span><span class="s1">&#39;heartbeat&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="m">50</span>
elasticsearch<span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="nb">false</span>
elasticsearch<span class="o">[</span><span class="s1">&#39;cluster&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;nebuchadnezzar&#39;</span>
elasticsearch<span class="o">[</span><span class="s1">&#39;es\_hosts&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;52.53.214.68&#39;</span> <span class="o">=</span>&gt; <span class="m">10003</span>, <span class="s1">&#39;52.53.242.129&#39;</span> <span class="o">=</span>&gt; <span class="m">10003</span>, <span class="s1">&#39;52.53.68.67&#39;</span> <span class="o">=</span>&gt; <span class="m">10003</span><span class="o">}</span> ----
</pre></div>
</div>
</div>
<div class="section" id="database-tier">
<h4>Database Tier<a class="headerlink" href="#database-tier" title="Permalink to this headline">¶</a></h4>
<p>|morpheus| will install a local MySQL server in its stand-alone
configuration mode. To disable creating the local MySQL server set the
entry mysql[‘enable’] = false and add one or more database servers using
the mysql[‘host’] entry. This entry is a Ruby hash using hash rocket
style syntax since the key contains dots. The key is an IP address or
DNS name with the paired value the port the database is listening on.
The configuration script for the installer will take the values and turn
them into a URL JDBC string that the application will use. Enter the
database name and credentials using the entries mysql[‘morpheus_db’],
mysql[‘morpheus_db_user’], and mysql[‘morpheus_password’]
respectively. The database user requires write access to all tables in
the |morpheus| database with the all privileges statement.</p>
</div>
<div class="section" id="message-queue-tier">
<h4>Message Queue Tier<a class="headerlink" href="#message-queue-tier" title="Permalink to this headline">¶</a></h4>
<p>RabbitMQ is the internal message broker and is created as a single node.
RabbitMQ can be scaled out in a cluster configuration and fronted by a
load balancer to make it more highly available. The external load
balancer is used so that each application server can connect to a single
IP address or DNS name. To prevent the local RabbitMQ server creation
during setup set the configuration entry rabbitmq[‘enable’] = false and
use the three entries rabbitmq[‘host’], rabbitmq[‘port’], and
rabbitmq[‘stomp_port’] to the appropriate strings for the external load
balancer. The entry for the virtual host is rabbitmq[‘vhost’] and should
be set to / or root if no virtual host was created for the RabbitMQ
cluster. When using a load balancer fronting a RabbitMQ cluster the
heartbeat should be adjusted form the default of 580 seconds to
something just shorter than the connection timeout of the load balancer
using the entry rabbitmq[‘heartbeat’]. This prevents the connection
through the load balancer from closing and causing the associated
channels from closing as well in the message broker.</p>
</div>
<div class="section" id="search-index-tier">
<h4>Search Index Tier<a class="headerlink" href="#search-index-tier" title="Permalink to this headline">¶</a></h4>
<p>|morpheus| uses ElasticSearch to store data for searching, a default
instance is installed by the stand-alone installer. To provide
redundancy and scalability an external ElasticSearch cluster is needed.
To disable the creation of the internal ElasticSearch instance set the
configuration entry elasticsearch[‘enable’] = false. Provide the cluster
name of the external ElasitcSearch cluster using the configuration entry
elasticsearch[‘cluster’] and elasticsearch[‘es_hosts’] which is a Ruby
hash using hash rocket style syntax since the key contains dots. The key
is an IP address or DNS name with the paired value the port the database
is listening on.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ElasticSearch v1.6 is currently supported.</p>
</div>
</div>
<div class="section" id="application-secrets">
<h4>Application Secrets<a class="headerlink" href="#application-secrets" title="Permalink to this headline">¶</a></h4>
<p>|morpheus| creates a secrets file at
/opt/morppheus/morphesu-secrets.json on the first run of the installer
configuration script. If the file exists, it will use the file and the
secrets contained. These entries are generated randomly and are unique
to each initial install. To synchronize access between application
servers each server needs to have the same secrets file. Depending on
the number of external components used, |morpheus| will use some or none
of the settings in this file. Secrets are still generated in case a
re-configuration after the initial setup requires a shared password for
a component.</p>
</div>
<div class="section" id="id2">
<h4>SSL Certificates<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>The default mode for |morpheus| is to setup the web tier using
encryption to provide secure access to |morpheus| over Transport Layer
Security (TLS). |morpheus| will generate self-signed certificates if no
certificate is provided in the configuration file. To provide your own
certificate:</p>
<p>. Copy the private key and certificate to <code class="docutils literal"><span class="pre">/etc/morpheus/ssl/your_fqdn_name.key</span></code> and
<code class="docutils literal"><span class="pre">/etc/morpheus/ssl/your_fqdn_name.crt</span></code> respectively.</p>
<p>. Edit the configuration file /etc/morpheus/morpheus.rb and add the
following entries:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>nginx<span class="o">[</span>‘ssl<span class="se">\_</span>certificate’<span class="o">]</span> <span class="o">=</span> ‘path to the certificate file<span class="s1">&#39;</span>
<span class="s1">nginx[‘ssl\_server\_key’] = ‘path to the server key file&#39;</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Both files should be owned by root and only readable by root. If the server certificate is signed by an intermediate then you should include the signing chain inside the certificate file.</p>
</div>
<p>In a distributed deployment, an external load balancer routes requests
to a pool of web/application servers. Depending on your infrastructure
setup the backend pool of servers can operate in TLS mode or non-TLS
mode which provides SSL offloading. To simplify the configuration, it is
possible to allow the load balancer to connect to each application
server using TLS. If your load balancer requires a certificate
validation with a known certificate authority, then you can import these
custom certificates as described in the previous paragraph. The other
option is to enable SSL offloading where the load balancer connects to
the application server pool over a non-TLS connection. To setup TLS
offloading in the |morpheus| configuration file set the appliance_url
to a URL that starts with http instead of https, this instructs the
configuration script to not generate the self-singed certificates.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the configuration file <code class="docutils literal"><span class="pre">appliance_url</span></code> does not have an equal sign between the name and value.</p>
</div>
<p>[[upgrading]]</p>
</div>
</div>
</div>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<p>|morpheus| provides a very simple and convenient upgrade process. In
most cases it is simply a matter of installing the new package on top of
itself and reconfiguring the services.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">All services except the morpheus-ui must be running during a reconfigure. The morpheus-ui also must be restarted or stopped and started during an upgrade. Failure to do so will result in errors.</p>
</div>
<div class="section" id="debian-ubuntu">
<h3>Debian / Ubuntu<a class="headerlink" href="#debian-ubuntu" title="Permalink to this headline">¶</a></h3>
<p>Simply download the latest package or request the latest package from
your account service representative.</p>
<p>Then run the install process as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo dpkg -i morpheus-appliance<span class="se">\_</span>x.x.x-1.amd64.deb
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl reconfigure
sudo morpheus-ctl start morpheus-ui
</pre></div>
</div>
<p>This typically is enough to complete a full upgrade. Databases will
automatically be migrated upon restart of the application and service
version upgrades will automatically be applied.</p>
</div>
<div class="section" id="centos-rhel">
<h3>CentOS / RHEL<a class="headerlink" href="#centos-rhel" title="Permalink to this headline">¶</a></h3>
<p>Yum based package upgrades are a little different. In this case we want
to run a <code class="docutils literal"><span class="pre">rpm</span> <span class="pre">-U</span></code> command as the package manager is slightly
different.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo rpm -U morpheus-appliance-x.x.x-1.x86<span class="se">\_</span><span class="m">64</span>.rpm
sudo morpheus-ctl stop morpheus-ui
sudo morpheus-ctl reconfigure
sudo morpheus-ctl start morpheus-ui
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Sometimes it may be necessary to restart all appliance services on the host. In order to do this simply type <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">morpheus-ctl</span> <span class="pre">restart</span></code>. This will restart ALL services.</p>
</div>
</div>
</div>
<div class="section" id="initial-appliance-setup">
<h2>Initial Appliance Setup<a class="headerlink" href="#initial-appliance-setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="appliance-setup">
<h3>Appliance Setup<a class="headerlink" href="#appliance-setup" title="Permalink to this headline">¶</a></h3>
<p>After installation, log into the appliance at the URL presented upon completion. An initial setup wizard walks through the first account and user creations.</p>
<ol class="arabic simple">
<li>Enter Master Account name<ul>
<li>Typically, the Master Account name is your Company name.</li>
</ul>
</li>
<li>Create Master User<ul>
<li>First Name</li>
<li>Last Name</li>
<li>Username</li>
<li>Email Address</li>
<li>Password
* Must be at least 8 characters longs and contain one each of the following: Uppercase letter, lowercase letter, Number, Special Character</li>
</ul>
</li>
<li>Enter Appliance Name &amp; Appliance URL<ul>
<li>The Appliance Name is used for white labeling and as a reference for multi-appliance installations.</li>
<li>The Appliance URL is the URL all provisioned instances will report back to. Example: <a class="reference external" href="https://example.morpheusdata.com">https://example.morpheusdata.com</a>.</li>
</ul>
</li>
</ol>
<p>The Appliance URL can be changed later, and also set to different url per cloud integration.</p>
<ol class="arabic simple">
<li>Optionally Enable or Disable Backups, Monitoring, or Logs from this screen.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may adjust these settings from the Administration section.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Master Account name is the top-level admin account.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Master User is the system super user and will have full access privileges.</p>
</div>
<p>Upon completing of the initial appliance setup, you will be taken to the Admin -&gt; Settings page, where you will add your License Key.</p>
</div>
<div class="section" id="add-a-license-key">
<h3>Add a License Key<a class="headerlink" href="#add-a-license-key" title="Permalink to this headline">¶</a></h3>
<p>In order to provision anything in |morpheus| , a |morpheus| License Key must be applied.</p>
<p>If you do not already have a license key, one may be requested from <a class="reference external" href="https://www.morpheushub.com">https://www.morpheushub.com</a> or from your |morpheus| representative.</p>
<p>In the Administration -&gt; Settings section, select the LICENSE tab, paste your License Key and click “UPDATE”</p>
<p>image::/getting_started/license_key.png[]</p>
<p>When the license is accepted, your license details will populate in the Current License section.</p>
<p>If you receive an error message and your license is not accepted, please check it was copied in full and then contact your |morpheus| representative. You can also verify the License Key and expiration at <a class="reference external" href="https://www.morpheushub.com">https://www.morpheushub.com</a>.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../provisioning/provisioning.html" class="btn btn-neutral float-right" title="Provisioning" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Morpheus Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, jw.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>